_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{"3h94":function(e,t){function r(e){return 240==(240&e)?4:224==(224&e)?3:192==(192&e)?2:e==(127&e)?1:0}function n(e,t,n){var o=0,a="";if(t=t||0,e.length-t<=0)throw new Error("No more characters remaining in array.");if(0==(n=n||r(e[t])))throw new Error(e[t].toString(2)+" is not a significative byte (offset:"+t+").");if(1===n)return e[t];if(e.length-t<n)throw new Error("Expected at least "+n+" bytes remaining in array.");if(a="00000000".slice(0,n)+1+"00000000".slice(n+1),e[t]&parseInt(a,2))throw Error("Index "+t+": A "+n+" bytes encoded char cannot encode the "+(n+1)+"th rank bit to 1.");for(a="0000".slice(0,n+1)+"11111111".slice(n+1),o+=(e[t]&parseInt(a,2))<<6*--n;n;){if(128!==(128&e[t+1])||64===(64&e[t+1]))throw Error("Index "+(t+1)+': Next bytes of encoded char must begin with a "10" bit sequence.');o+=(63&e[++t])<<6*--n}return o}function o(e,t,o,a){var i,s=[];for(t|=0,o="number"===typeof o?o:e.byteLength||e.length;t<o;t++){if(t+(i=r(e[t]))>o){if(a)throw Error("Index "+t+": Found a "+i+" bytes encoded char declaration but only "+(o-t)+" bytes are available.")}else s.push(String.fromCodePoint(n(e,t,i)));t+=i-1}return s.join("")}function a(e){if(e<128)return 1;if(e<2048)return 2;if(e<65536)return 3;if(e<2097152)return 4;throw new Error("CharCode "+e+" cannot be encoded with UTF8.")}function i(e,t,r,n){if(e|=0,t=t||[],r|=0,1==(n=n||a(e)))t[r]=e;else for(t[r++]=(parseInt("1111".slice(0,n),2)<<8-n)+(e>>>6*--n);n>0;)t[r++]=e>>>6*--n&63|128;return t}e.exports={isNotUTF8:function(e,t,r){try{o(e,t,r,!0)}catch(n){return!0}return!1},getCharLength:r,getCharCode:n,getStringFromBytes:o,getBytesForCharCode:a,setBytesFromCharCode:i,setBytesFromString:function(e,t,r,n,o){e=e||"",t=t||[],r|=0,n="number"===typeof n?n:t.byteLength||1/0;for(var s=0,c=e.length;s<c;s++){var u=a(e[s].codePointAt(0));if(o&&r+u>n)throw new Error('Not enought bytes to encode the char "'+e[s]+'" at the offset "'+r+'".');i(e[s].codePointAt(0),t,r,u),r+=u}return t}}},"4qKB":function(e,t,r){"use strict";var n;!function(e){var t,r;e.MIN_SONG_VERSION=1,e.MAX_SONG_VERSION=2;(r=t||(t=e.StoreKeys||(e.StoreKeys={}))).SONG_VERSION="songVersion",r.FILE_TIMESTAMP="fileTimestamp",r.UPDATED_TRACKS_LIST="updatedTracks",r.UPDATED_TRACKS_TIMESTAMP="updatedTracksTimestamp",r.TRACK_NUMBER="trackNumber",r.CHECKBOX_VALUE="checkboxValue",r.TRACK_NUMBER_TO_CHECKBOX_VALUE="trackNumber=>checkboxValue",r.PLAYED_NOTEGROUP_ID="playedNoteGroupID",r.PIANO_TYPE="pianoType",r.GUITAR_TYPE="guitarType";var n,o;e.DEFAULT_DOWNLOAD_DATA="8J+OtQ==";(o=n||(n=e.Instrument||(e.Instrument={}))).GUITAR="guitar",o.UKULELE_HIGH_G="ukulele_high_g",o.UKULELE_LOW_G="ukulele_low_g"}(n||(n={})),t.a=n},Djxk:function(e,t,r){e.exports={played:"NoteGroup_played__22lZb","played-animation":"NoteGroup_played-animation__3DYfp"}},EQet:function(e,t,r){(function(e){var r={};!function(e){var t=e.DEFAULT_VOLUME=90,r=(e.DEFAULT_DURATION=128,e.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(e){var t=/([a-g])(#+|b+)?([0-9]+)$/i.exec(e),n=t[1].toLowerCase(),o=t[2]||"";return 12*parseInt(t[3],10)+r.midi_letter_pitches[n]+("#"==o.substr(0,1)?1:-1)*o.length},ensureMidiPitch:function(e){return"number"!=typeof e&&/[^0-9]/.test(e)?r.midiPitchFromNote(e):parseInt(e,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(e,t){var n,o=0,a=e;t=t||!1;return e>23&&(a=e-12*(o=Math.floor(e/12)-1)),n=r.midi_pitches_letter[a],t&&n.indexOf("#")>0&&(n=r.midi_flattened_notes[n]),n+o},mpqnFromBpm:function(e){var t=Math.floor(6e7/e),r=[];do{r.unshift(255&t),t>>=8}while(t);for(;r.length<3;)r.push(0);return r},bpmFromMpqn:function(e){if("undefined"!=typeof e[0]){0;for(var t=0,r=e.length-1;r>=0;++t,--r)e[t]<<r}return Math.floor(6e7/e)},codes2Str:function(e){return String.fromCharCode.apply(null,e)},str2Bytes:function(e,t){if(t)for(;e.length/2<t;)e="0"+e;for(var r=[],n=e.length-1;n>=0;n-=2){var o=0===n?e[n]:e[n-1]+e[n];r.unshift(parseInt(o,16))}return r},translateTickTime:function(e){for(var t=127&e;e>>=7;)t<<=8,t|=127&e|128;for(var r=[];r.push(255&t),128&t;)t>>=8;return r}}),n=function(e){if(!this)return new n(e);!e||null===e.type&&void 0===e.type||null===e.channel&&void 0===e.channel||null===e.param1&&void 0===e.param1||(this.setTime(e.time),this.setType(e.type),this.setChannel(e.channel),this.setParam1(e.param1),this.setParam2(e.param2))};n.NOTE_OFF=128,n.NOTE_ON=144,n.AFTER_TOUCH=160,n.CONTROLLER=176,n.PROGRAM_CHANGE=192,n.CHANNEL_AFTERTOUCH=208,n.PITCH_BEND=224,n.prototype.setTime=function(e){this.time=r.translateTickTime(e||0)},n.prototype.setType=function(e){if(e<n.NOTE_OFF||e>n.PITCH_BEND)throw new Error("Trying to set an unknown event: "+e);this.type=e},n.prototype.setChannel=function(e){if(e<0||e>15)throw new Error("Channel is out of bounds.");this.channel=e},n.prototype.setParam1=function(e){this.param1=e},n.prototype.setParam2=function(e){this.param2=e},n.prototype.toBytes=function(){var e=[],t=this.type|15&this.channel;return e.push.apply(e,this.time),e.push(t),e.push(this.param1),void 0!==this.param2&&null!==this.param2&&e.push(this.param2),e};var o=function(e){if(!this)return new o(e);this.setTime(e.time),this.setType(e.type),this.setData(e.data)};o.SEQUENCE=0,o.TEXT=1,o.COPYRIGHT=2,o.TRACK_NAME=3,o.INSTRUMENT=4,o.LYRIC=5,o.MARKER=6,o.CUE_POINT=7,o.CHANNEL_PREFIX=32,o.END_OF_TRACK=47,o.TEMPO=81,o.SMPTE=84,o.TIME_SIG=88,o.KEY_SIG=89,o.SEQ_EVENT=127,o.prototype.setTime=function(e){this.time=r.translateTickTime(e||0)},o.prototype.setType=function(e){this.type=e},o.prototype.setData=function(e){this.data=e},o.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var e=[];if(e.push.apply(e,this.time),e.push(255,this.type),Array.isArray(this.data))e.push(this.data.length),e.push.apply(e,this.data);else if("number"==typeof this.data)e.push(1,this.data);else if(null!==this.data&&void 0!==this.data){e.push(this.data.length);var t=this.data.split("").map((function(e){return e.charCodeAt(0)}));e.push.apply(e,t)}else e.push(0);return e};var a=function(e){if(!this)return new a(e);var t=e||{};this.events=t.events||[]};a.START_BYTES=[77,84,114,107],a.END_BYTES=[0,255,47,0],a.prototype.addEvent=function(e){return this.events.push(e),this},a.prototype.addNoteOn=a.prototype.noteOn=function(e,o,a,i){return this.events.push(new n({type:n.NOTE_ON,channel:e,param1:r.ensureMidiPitch(o),param2:i||t,time:a||0})),this},a.prototype.addNoteOff=a.prototype.noteOff=function(e,o,a,i){return this.events.push(new n({type:n.NOTE_OFF,channel:e,param1:r.ensureMidiPitch(o),param2:i||t,time:a||0})),this},a.prototype.addNote=a.prototype.note=function(e,t,r,n,o){return this.noteOn(e,t,n,o),r&&this.noteOff(e,t,r,o),this},a.prototype.addChord=a.prototype.chord=function(e,t,r,n){if(!Array.isArray(t)&&!t.length)throw new Error("Chord must be an array of pitches");return t.forEach((function(t){this.noteOn(e,t,0,n)}),this),t.forEach((function(t,n){0===n?this.noteOff(e,t,r):this.noteOff(e,t)}),this),this},a.prototype.setInstrument=a.prototype.instrument=function(e,t,r){return this.events.push(new n({type:n.PROGRAM_CHANGE,channel:e,param1:t,time:r||0})),this},a.prototype.setTempo=a.prototype.tempo=function(e,t){return this.events.push(new o({type:o.TEMPO,data:r.mpqnFromBpm(e),time:t||0})),this},a.prototype.toBytes=function(){var e=0,t=[],n=a.START_BYTES,o=a.END_BYTES;this.events.forEach((function(r){var n=r.toBytes();e+=n.length,t.push.apply(t,n)})),e+=o.length;var i=r.str2Bytes(e.toString(16),4);return n.concat(i,t,o)};var i=function(e){if(!this)return new i(e);var t=e||{};if(t.ticks){if("number"!==typeof t.ticks)throw new Error("Ticks per beat must be a number!");if(t.ticks<=0||t.ticks>=32768||t.ticks%1!==0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=t.ticks||128,this.tracks=t.tracks||[]};i.HDR_CHUNKID="MThd",i.HDR_CHUNK_SIZE="\0\0\0\x06",i.HDR_TYPE0="\0\0",i.HDR_TYPE1="\0\x01",i.prototype.addTrack=function(e){return e?(this.tracks.push(e),this):(e=new a,this.tracks.push(e),e)},i.prototype.toBytes=function(){var e=this.tracks.length.toString(16),t=i.HDR_CHUNKID+i.HDR_CHUNK_SIZE;return parseInt(e,16)>1?t+=i.HDR_TYPE1:t+=i.HDR_TYPE0,t+=r.codes2Str(r.str2Bytes(e,2)),t+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach((function(e){t+=r.codes2Str(e.toBytes())})),t},e.Util=r,e.File=i,e.Track=a,e.Event=n,e.MetaEvent=o}(r),null!==e?e.exports=r:null!==t?t=r:this.Midi=r}).call(this,r("YuTi")(e))},OTm4:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return p}));var n=r("1OyB"),o=r("vuIU"),a=r("rePB"),i=r("B7GI"),s=r("XlTo");function c(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function e(t){var r=this;Object(n.a)(this,e),Object(a.a)(this,"filesToLoad",[]);var o,i=c(t);try{var u=function(){var e=o.value,t=new s.i(e,(function(){console.log("Preloaded "+e)}));r.filesToLoad.push(t)};for(i.s();!(o=i.n()).done;)u()}catch(l){i.e(l)}finally{i.f()}},f=function e(){Object(n.a)(this,e)};Object(a.a)(f,"isRunning",!1);var h,d=f;!function(e){e[e.SynthBasic=0]="SynthBasic",e[e.SynthFM=1]="SynthFM",e[e.SynthAM=2]="SynthAM",e[e.SynthMusicalJS=3]="SynthMusicalJS",e[e.Sampled_1=4]="Sampled_1",e[e.Sampled_2=5]="Sampled_2",e[e.SynthPluck=6]="SynthPluck",e[e.COUNT=7]="COUNT"}(h||(h={}));var p=function(e){var t=parseInt(e);return!isNaN(t)&&t>=0&&t<h.COUNT?t:h.SynthBasic},g=function(){function e(t){if(Object(n.a)(this,e),Object(a.a)(this,"type",h.SynthBasic),Object(a.a)(this,"toneJS_SynthOrSampler",null),Object(a.a)(this,"toneJS_Pluck",null),Object(a.a)(this,"musicalJS_Synth",null),Object(a.a)(this,"isReady",!1),Object(a.a)(this,"preloader",null),Object(a.a)(this,"samplesMap",void 0),Object(a.a)(this,"baseURL",""),this.type=t,this.type===h.SynthMusicalJS)console.log("Creating a Musical JS Instrument"),this.musicalJS_Synth=new i.a.Instrument("piano"),this.isReady=!0;else switch(console.log("Creating a Tone JS Instrument"),d.isRunning||s.k().then((function(){console.log("Tone is Ready!"),d.isRunning=!0})),this.type){case h.Sampled_1:this.baseURL="/s/m/grand/",this.samplesMap={C1:"4.mp3",C2:"16.mp3",C3:"28.mp3",D3:"30.mp3",E3:"32.mp3",G3:"35.mp3",A3:"37.mp3",B3:"39.mp3",C4:"40.mp3",D4:"42.mp3",E4:"44.mp3",F4:"45.mp3",G4:"47.mp3",A4:"49.mp3",C5:"52.mp3",F5:"57.mp3",A5:"61.mp3",C6:"64.mp3",F6:"69.mp3",C7:"76.mp3",G7:"83.mp3",C8:"88.mp3"},this.setupSamplerInstrument({attack:.01});break;case h.Sampled_2:this.baseURL="/s/m/bright/",this.samplesMap={C1:"4.mp3",G1:"11.mp3",C2:"16.mp3",G2:"23.mp3",C3:"28.mp3",G3:"35.mp3",C4:"40.mp3",G4:"47.mp3",C5:"52.mp3",G5:"59.mp3",C6:"64.mp3",G6:"71.mp3",C7:"76.mp3",G7:"83.mp3",C8:"88.mp3"},this.setupSamplerInstrument({attack:.05});break;case h.SynthFM:this.toneJS_SynthOrSampler=new s.f(s.c).toDestination(),this.isReady=!0;break;case h.SynthAM:this.toneJS_SynthOrSampler=new s.f(s.a).toDestination(),this.isReady=!0;break;case h.SynthPluck:console.log("%cThe pluck synth is currently really shitty. Please do not proceed. \ud83d\ude49","color:red;font-size:16px;font-weight:bold;"),this.toneJS_Pluck=new s.e({attackNoise:.2,dampening:2e3,resonance:.982,release:1}).toDestination(),this.isReady=!0;break;case h.SynthBasic:default:this.toneJS_SynthOrSampler=new s.f(s.h).toDestination(),this.isReady=!0}}return Object(o.a)(e,[{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=t>0?" for ".concat(t," seconds"):"",o=" at velocity = "+r;console.log("Instrument: PLAY "+e+n+o);var a=e+20,i=s.d(a,"midi").toNote();this.toneJS_SynthOrSampler?t>0?this.toneJS_SynthOrSampler.triggerAttackRelease(i,t,s.j(),r):this.toneJS_SynthOrSampler.triggerAttack(i,s.j(),r):this.toneJS_Pluck?this.toneJS_Pluck.triggerAttack(i):this.musicalJS_Synth.tone(-a)}},{key:"stop",value:function(e){if(console.log("Instrument: STOP "+e),this.toneJS_SynthOrSampler){var t=e+20,r=s.d(t,"midi").toNote();this.toneJS_SynthOrSampler.triggerRelease(r)}}},{key:"setupSamplerInstrument",value:function(e){var t=this;this.isReady=!1;var r=[];for(var n in this.samplesMap){var o=this.samplesMap[n];r.push(this.baseURL+o)}this.preloader=new l(r);var a={urls:this.samplesMap,baseUrl:this.baseURL,attack:e.attack,release:.8,curve:"exponential",onload:function(){t.isReady=!0}};this.toneJS_SynthOrSampler=new s.g(a).toDestination()}},{key:"dispose",value:function(){this.preloader=null,this.toneJS_SynthOrSampler&&(this.toneJS_SynthOrSampler.dispose(),this.toneJS_SynthOrSampler=null),this.toneJS_Pluck&&(this.toneJS_Pluck.dispose(),this.toneJS_Pluck=null),this.musicalJS_Synth&&(this.musicalJS_Synth=null)}},{key:"isInitialized",get:function(){return this.isReady}}]),e}();t.b=g},SFhg:function(e,t,r){"use strict";function n(e){let t;if(e){if(!(e instanceof ArrayBuffer))throw Error("Invalid buffer received.");if(this.datas=new DataView(e,0,n.HEADER_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"h"!==String.fromCharCode(this.datas.getUint8(2))||"d"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileHeader : MThd prefix not found");if(6!==this.datas.getUint32(4))throw new Error("Invalid MIDIFileHeader : Chunk length must be 6")}else t=new Uint8Array(n.HEADER_LENGTH),t[0]=77,t[1]=84,t[2]=104,t[3]=100,t[4]=0,t[5]=0,t[6]=0,t[7]=6,t[8]=0,t[9]=1,t[10]=0,t[11]=1,t[12]=0,t[13]=192,this.datas=new DataView(t.buffer,0,n.HEADER_LENGTH)}n.HEADER_LENGTH=14,n.FRAMES_PER_SECONDS=1,n.TICKS_PER_BEAT=2,n.prototype.getFormat=function(){const e=this.datas.getUint16(8);if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI file : MIDI format ("+e+"), format can be 0, 1 or 2 only.");return e},n.prototype.setFormat=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid MIDI format given ("+e+"), format can be 0, 1 or 2 only.");this.datas.setUint16(8,e)},n.prototype.getTracksCount=function(){return this.datas.getUint16(10)},n.prototype.setTracksCount=function(e){return this.datas.setUint16(10,e)},n.prototype.getTickResolution=function(e){return 32768&this.datas.getUint16(12)?1e6/(this.getSMPTEFrames()*this.getTicksPerFrame()):(e=e||5e5)/this.getTicksPerBeat()},n.prototype.getTimeDivision=function(){return 32768&this.datas.getUint16(12)?n.FRAMES_PER_SECONDS:n.TICKS_PER_BEAT},n.prototype.getTicksPerBeat=function(){var e=this.datas.getUint16(12);if(32768&e)throw new Error("Time division is not expressed as ticks per beat.");return e},n.prototype.setTicksPerBeat=function(e){this.datas.setUint16(12,32767&e)},n.prototype.getSMPTEFrames=function(){const e=this.datas.getUint16(12);let t;if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");if(t=32512&e,-1===[24,25,29,30].indexOf(t))throw new Error("Invalid SMPTE frames value ("+t+").");return 29===t?29.97:t},n.prototype.getTicksPerFrame=function(){const e=this.datas.getUint16(12);if(!(32768&e))throw new Error("Time division is not expressed as frames per seconds.");return 255&e},n.prototype.setSMTPEDivision=function(e,t){if(29.97===e&&(e=29),-1===[24,25,29,30].indexOf(e))throw new Error("Invalid SMPTE frames value given ("+e+").");if(0>t||255<t)throw new Error("Invalid ticks per frame value given ("+e+").");this.datas.setUint8(12,128|e),this.datas.setUint8(13,t)},e.exports=n},TSYQ:function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)&&n.length){var i=o.apply(null,n);i&&e.push(i)}else if("object"===a)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},YSrY:function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return vt}));var n,o=r("nKUr"),a=r("MX0m"),i=r.n(a),s=r("nZzK"),c=r("WKqS"),u=r("1OyB"),l=r("vuIU"),f=r("rePB");!function(e){var t=0,r=[],n=null,o=null,a=null,i=null,s=null,c=null;function u(){return t}function l(){return r[t]}function f(e){r[t]=e}function h(){n(u()),o(l()),c()}function d(){var e=a();t<0?t=0:t>=e&&(t=e-1)}function p(){d(),h()}function g(){!function(){var e=i(t),r=l();r<0?f(0):r>=e&&f(e-1)}(),h(),s(t,l())}e.setupCallbacks=function(e,t,r,u,l,f){n=e,o=t,c=r,a=u,i=l,s=f},e.setupIndexes=function(e){t=0,r=[];for(var n=0;n<e;n++)r.push(0)},e.getCurrentTrackNumber=u,e.getCurrentNoteGroupNumber=l,e.update=h,e.setTrackAndNoteGroup=function(e,r){t=e,f(r),d(),g()},e.prevTrack=function(){t--,p()},e.nextTrack=function(){t++,p()},e.prevNoteGroup=function(){r[t]--,g()},e.nextNoteGroup=function(){r[t]++,g()},e.firstNoteGroup=function(){f(0),g()},e.lastNoteGroup=function(){f(i(t)-1),g()}}(n||(n={}));var h=n,d=r("JX7q");function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=r("U8pU");function E(e,t){return!t||"object"!==Object(g.a)(t)&&"function"!==typeof t?Object(d.a)(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,r){return(v=m()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&p(o,r.prototype),o}).apply(null,arguments)}function y(e){var t="function"===typeof Map?new Map:void 0;return(y=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function b(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}var O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,e);var t=_(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object(f.a)(Object(d.a)(e),"trackNumber",-1),e}return r}(y(Array)),k=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Object(u.a)(this,e),Object(f.a)(this,"notes",void 0),Object(f.a)(this,"playTimeMillis",-1),Object(f.a)(this,"trackNumber",0),Object(f.a)(this,"noteNumber",-1),this.playTimeMillis=r,this.trackNumber=n,"string"===typeof t){var o=t;if(-1!==o.indexOf("[")){var a=/\[\s*(.+)\s*\@\s*(.+)\s*\]/,i=a.exec(o);o=i[1];var s=i[2];this.playTimeMillis=parseFloat(s)}var c,l=[],h=o.split("."),d=b(h);try{for(d.s();!(c=d.n()).done;){var p=c.value,g=parseInt(p);l.push(new S(g))}}catch(E){d.e(E)}finally{d.f()}this.notes=l}else this.notes=t?[t]:[]}return Object(l.a)(e,[{key:"addNote",value:function(e){this.notes.push(e);var t=this.notes.length;if(t>1){this.notes.sort(S.compare);for(var r=[this.notes[0]],n=1;n<t;n++){var o=r[r.length-1],a=this.notes[n];a.pianoNote!==o.pianoNote&&r.push(a)}this.notes=r}}},{key:"toString",value:function(){return-1===this.playTimeMillis?this.notes.join("."):"[".concat(this.notes.join(".")," @ ").concat(this.playTimeMillis,"]")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toFullString",value:function(){return"".concat(this.notes.join(".")," @ ").concat(this.playTimeMillis," with trackIndex: ").concat(this.trackNumber," noteGroupIndex: ").concat(this.noteNumber)}},{key:"toStringV1",value:function(){return this.notes.join(".")}},{key:"copy",value:function(){var t=new e(this.toString());return t.playTimeMillis=this.playTimeMillis,t.trackNumber=this.trackNumber,t.noteNumber=this.noteNumber,t}},{key:"numNotes",get:function(){return this.notes.length}}],[{key:"merge",value:function(t,r){var n,o=new e,a=b(t.notes);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.addNote(i)}}catch(l){a.e(l)}finally{a.f()}var s,c=b(r.notes);try{for(c.s();!(s=c.n()).done;){var u=s.value;o.addNote(u)}}catch(l){c.e(l)}finally{c.f()}return o}}]),e}(),S=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:127;Object(u.a)(this,e),Object(f.a)(this,"pianoNote",void 0),Object(f.a)(this,"midiNote",void 0),Object(f.a)(this,"durationMillis",void 0),Object(f.a)(this,"velocity",void 0),this.pianoNote=t,this.midiNote=t+20,this.durationMillis=r,this.velocity=n}return Object(l.a)(e,null,[{key:"compare",value:function(e,t){return e.pianoNote-t.pianoNote}}]),Object(l.a)(e,[{key:"toString",value:function(){return this.pianoNote+""}}]),e}(),I=r("4qKB"),M=r("o0o1"),w=r.n(M);function A(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,s,"next",e)}function s(e){A(a,n,o,i,s,"throw",e)}i(void 0)}))}}function x(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j,F=r("EQet"),R=r("dTTX"),U=r("hLrB"),P=null,L=null,V=null,G=0,H=0,B="",K=0;!function(e){function t(){return(t=C(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B=t.name,K=t.size,e.abrupt("return",new Promise((function(e,n){var o=new FileReader;o.addEventListener("load",(function(t){r(t.target.result),console.log("Loaded "+B),e(B)})),o.addEventListener("error",(function(e){console.error(e),n(e)})),o.readAsArrayBuffer(t)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(e){P=new R(e),L=P.getMidiEvents(),V=P.getLyrics();var t=P.header,r=t.getFormat();G=t.getTracksCount(),console.log("MIDI Format: ".concat(r)),t.getTimeDivision()===R.Header.TICKS_PER_BEAT?console.log("Ticks Per Beat: ".concat(t.getTicksPerBeat())):console.log("TODO: SMPTE Frames!"),V.length>0?console.log("Lyrics Track contains ".concat(V.length," events.")):V=null,function(){for(var e=P.getEvents(),t=null,r=0,o=e.length;r<o;r++)n((t=e[r]).type,t.subtype)}();var o=L[L.length-1].playTime;H=o/1e3,console.log("Num Tracks: ".concat(G)),console.log("Duration: ".concat(H))}function n(e,t){console.log("EVENT => "+function(e){switch(e){case U.EVENT_MIDI:return"MIDI";case U.EVENT_META:return"META";case U.EVENT_SYSEX:return"SYSEX";case U.EVENT_DIVSYSEX:return"DIVSYSEX";default:return"UNKNOWN"}}(e),function(e){switch(e){case U.EVENT_META_SEQUENCE_NUMBER:return"META_SEQUENCE_NUMBER";case U.EVENT_META_TEXT:return"META_TEXT";case U.EVENT_META_COPYRIGHT_NOTICE:return"META_COPYRIGHT_NOTICE";case U.EVENT_META_TRACK_NAME:return"META_TRACK_NAME";case U.EVENT_META_INSTRUMENT_NAME:return"META_INSTRUMENT_NAME";case U.EVENT_META_LYRICS:return"META_LYRICS";case U.EVENT_META_MARKER:return"META_MARKER";case U.EVENT_META_CUE_POINT:return"CUE_POINT";case U.EVENT_META_MIDI_CHANNEL_PREFIX:return"META_MIDI_CHANNEL_PREFIX";case U.EVENT_META_END_OF_TRACK:return"META_END_OF_TRACK";case U.EVENT_META_SET_TEMPO:return"META_SET_TEMPO";case U.EVENT_META_SMTPE_OFFSET:return"META_SMTPE_OFFSET";case U.EVENT_META_TIME_SIGNATURE:return"META_TIME_SIGNATURE";case U.EVENT_META_KEY_SIGNATURE:return"META_KEY_SIGNATURE";case U.EVENT_META_SEQUENCER_SPECIFIC:return"META_SEQUENCER_SPECIFIC";case U.EVENT_MIDI_NOTE_OFF:return"MIDI_NOTE_OFF";case U.EVENT_MIDI_NOTE_ON:return"MIDI_NOTE_ON";case U.EVENT_MIDI_NOTE_AFTERTOUCH:return"MIDI_NOTE_AFTERTOUCH";case U.EVENT_MIDI_CONTROLLER:return"MIDI_CONTROLLER";case U.EVENT_MIDI_PROGRAM_CHANGE:return"MIDI_PROGRAM_CHANGE";case U.EVENT_MIDI_CHANNEL_AFTERTOUCH:return"MIDI_CHANNEL_AFTERTOUCH";case U.EVENT_MIDI_PITCH_BEND:return"MIDI_PITCH_BEND";default:return"UNKNOWN"}}(t))}e.readFileAsync=function(e){return t.apply(this,arguments)},e.getLoadedFile=function(){return P},e.getLoadedMIDIEvents=function(){return L},e.getAllEvents=function(){return P.getEvents()},e.getDurationInSeconds=function(){return H},e.getNumTracks=function(){return G},e.getFileName=function(){return B},e.getFileSize=function(){return K},e.createFileFromTracks=function(e,t){var r,n=new F.File,o=new Map,a=x(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=new F.Track;s.setTempo(240);s.setInstrument(0,0),o[i]=s,n.addTrack(s)}}catch(p){a.e(p)}finally{a.f()}var c,u=new Map,l=x(t);try{var f=function(){var e=c.value,t=e.trackNumber,r=o[t];if(!r)return console.log("OOPS: MIDI TRACK IS NULL"),"continue";var n=u[t];if(n){u[t]=null;var a=.512*(e.playTimeMillis-n.playTimeMillis);n.notes.forEach((function(e,t){var n=0===t?a:0;r.noteOff(0,e.midiNote,n)}))}e.notes.forEach((function(e,t){r.noteOn(0,e.midiNote,0,e.velocity)})),u[t]=e};for(l.s();!(c=l.n()).done;)f()}catch(p){l.e(p)}finally{l.f()}var h=function(e){var t=o[e];u[e].notes.forEach((function(e,r){var n=0===r?512:0;t.noteOff(0,e.midiNote,n)}))};for(var d in u)h(d);return n.toBytes()},e.printTypeAndSubtype=n}(j||(j={}));var Y,J,X=j;(J=Y||(Y={})).p2m=function(e){return e+20},J.m2p=function(e){return e-20};var W=Y,q=r("qO+3"),z=r("OTm4"),Q=r("hKI/"),$=r.n(Q);function Z(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te,re,ne,oe,ae,ie=r("hLrB"),se=I.a.StoreKeys,ce=null,ue=0,le=[2,-1,5,7,-1,10,0],fe=[1,3,4,6,8,9,11],he=["a","b","c","d","e","f","g"],de=0,pe=null;function ge(){console.log("Reset Everything!"),ue=0,me.Tracks.setup(1),Ee(),Te.stop()}function Ee(){oe.saveCheckBoxes(),oe.saveTracks(),me.showNoteGroupsForTracks(),me.drawPiano()}(re=te||(te={})).labels=["z","x","c","v","b","n","m",",",".","/","a","s","d","f","g","h","j","k","l",";","q","w","e","r","t","y","u","i","o","p","[","]","\\","1","2","3","4","5","6","7","8","9","0","-","="],re.keyCodeToPianoKeyNumber={90:11,88:13,67:14,86:16,66:18,78:19,77:21,188:23,190:25,191:26,65:28,83:30,68:31,70:33,71:35,72:37,74:38,75:40,76:42,186:43,59:43,222:45,81:45,87:47,69:49,82:50,84:52,89:54,85:55,73:57,79:59,80:61,219:62,221:64,220:66,49:67,50:69,51:71,52:73,53:74,54:76,55:78,56:79,57:81,48:83,189:85,187:86},function(e){var t=0;function r(e){console.log("MIDI SUCCESS");var t=e;console.dir(t);var r,n=t.inputs.values(),a=(t.outputs.values(),Z(n));try{for(a.s();!(r=a.n()).done;){var i=r.value;console.log(i),i.onmidimessage=o}}catch(s){a.e(s)}finally{a.f()}}function n(e){console.log("No access to MIDI devices or your browser doesn't support WebMIDI API."+e)}function o(e){console.log("onMIDIMessage");var r=e.data,n=r[0]>>4,o=15&r[0],a=240&r[0],i=r[1],s=r[2],c=i-20;switch(a){case 144:console.log("piano key down: "+c+" velocity: "+s),be.playOneNote(c,!1),++t>1&&ve.mergeLastTwoGroups();break;case 128:t--;break;case 224:console.log("pitch wheel");break;default:console.log("MIDI data",r),console.log("cmd: ".concat(n,"  channel: ").concat(o,"  type: ").concat(a,"  note: ").concat(i,"  velocity: ").concat(s))}}e.setup=function(){navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!0}).then(r,n):alert("No MIDI support in your browser.")}}(ne||(ne={})),(ae=oe||(oe={})).load=function(){!function(){try{var e=JSON.parse(localStorage.getItem("tracks")),t=e.length;me.Tracks.setup(t);for(var r=0;r<t;r++){var n,o=Z(e[r]);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=new k(a);ve.addNoteGroupToTrack(i,r)}}catch(s){o.e(s)}finally{o.f()}}}catch(c){me.Tracks.setup(1)}}(),function(){localStorage.getItem("song_version")||localStorage.setItem("song_version","1");var e=parseInt(localStorage.getItem("song_version"));(e<I.a.MIN_SONG_VERSION||e>I.a.MAX_SONG_VERSION)&&(e=1);var t={};t[se.SONG_VERSION]=e,ce({type:q.a.Toggle.onSongVersionFormatChanged,payload:t})}()},ae.saveCheckBoxes=function(){localStorage.setItem("checkboxes",JSON.stringify(me.Tracks.getCheckedStateForAllTracks()))},ae.saveTracks=function(){var e=ve.getTracksAsJSON();localStorage.setItem("tracks",e)},ae.saveVersionToggle=function(e){localStorage.setItem("song_version",e+"")};var Te,me,ve,ye=function(){function e(){Object(u.a)(this,e),Object(f.a)(this,"isRunning",!1),Object(f.a)(this,"interval",null),Object(f.a)(this,"delay",10),Object(f.a)(this,"onmessage",void 0)}return Object(l.a)(e,[{key:"postMessage",value:function(e){var t=this;switch(console.log(t),e){case"start":console.log("Piano Clock Worker Started"),t.isRunning||(t.isRunning=!0,t.interval=setInterval((function(){t.onmessage&&t.onmessage("tick")}),t.delay));break;case"stop":default:console.log("Piano Clock Worker Stopped"),clearInterval(t.interval),t.isRunning=!1}}}]),e}();!function(e){var t=0,r=0,n=0,o=new ye,a=!1;o.onmessage=function(e){!function(e){var o=ve.getNoteGroupsFromTracks();if(i>=o.length)return void Te.stop();t=e-n+r;for(;t>=c;){var a=o[i];if(h.setTrackAndNoteGroup(a.trackNumber,a.noteNumber),m(),++i>=o.length)return void Te.stop();g()}}(performance.now())};var i=0,s=!1,c=0;function u(){return a}function l(){if(console.log("PLAY"),s)r=t;else{if(u()&&d(),0===ve.getNoteGroupsFromTracks().length)return void Te.stop();i=0,t=0,r=0,g()}s=!1,n=performance.now(),o.postMessage("start"),a=!0}function f(){p(),s=!0}function d(){p(),i=0}function p(){u()&&(o.postMessage("stop"),a=!1)}function g(){var e=ve.getNoteGroupsFromTracks();-1===(c=e[i].playTimeMillis)&&(c=t+250)}function E(){var e=ve.getNoteGroupsFromTracks();i>=e.length?i=e.length-1:i<0&&(i=0)}e.isPlaying=u,e.play=l,e.pause=f,e.togglePlayPause=function(){u()?f():l()},e.stop=d;e.playNoteAndGoBackwardInTheSong=$()((function(){T(-1)}),150),e.playNoteAndGoForwardInTheSong=$()((function(){T(1)}),150);function T(e){var t=ve.getNoteGroupsFromTracks();if(0!==t.length){E();var r=t[i];h.setTrackAndNoteGroup(r.trackNumber,r.noteNumber),m(),i+=e,E()}}function m(){var e=h.getCurrentTrackNumber(),t=h.getCurrentNoteGroupNumber(),r=ve.getNoteGroupFromTrack(t,e);if(r){var n,o=Z(r.notes);try{for(o.s();!(n=o.n()).done;){var a=n.value;be.playPianoNote(W.m2p(a.midiNote),a.velocity)}}catch(s){o.e(s)}finally{o.f()}var i={};i[se.PLAYED_NOTEGROUP_ID]=ve.getNoteGroupID(e,t),ce({type:q.a.Song.onPlayNoteGroup,payload:i})}}e.playAndGoBackwardOnCurrentTrack=$()((function(){m(),h.prevNoteGroup()}),150),e.playAndGoForwardOnCurrentTrack=$()((function(){m(),h.nextNoteGroup()}),150)}(Te||(Te={})),function(e){e.setupCopyHandler=function(){document.querySelector("html").addEventListener("copy",(function(e){if(e.preventDefault(),console.log("COPY"),e.clipboardData){var t=me.Tracks.getTextFileFromTracks();e.clipboardData.setData("text/plain",t)}})),document.querySelector("html").addEventListener("cut",(function(e){if(e.preventDefault(),console.log("CUT"),e.clipboardData){var t=me.Tracks.getTextFileFromTracks();e.clipboardData.setData("text/plain",t)}ge()}))},e.showNoteGroupsForTracks=function(){me.Tracks.checkAllNonEmptyTracks(),h.update();var e={};e[se.UPDATED_TRACKS_LIST]=ve.getRecentlyUpdatedTrackNumbersAsArray(),ce({type:q.a.Song.onTracksUpdated,payload:e}),ve.resetRecentlyUpdatedTrackNumbers()},e.scrollNoteGroupIntoView=function(e,t){var r=ve.getNoteGroupID(e,t),n=document.querySelector("#".concat(r));n&&n.scrollIntoView()},e.onKeyDown=function(e){if(pe){var t=e.keyCode,r=e.metaKey,n=e.ctrlKey,o=e.shiftKey;if(!r||37==t||39==t)switch(de=0,n&&(de=-1),o&&(de=1),e.preventDefault(),t){case 13:Te.togglePlayPause();break;case 33:++ue>0&&(ue=0),me.drawPiano();break;case 34:console.log("fn + DOWN"),--ue<-1&&(ue=-1),me.drawPiano();break;case 36:Te.playNoteAndGoBackwardInTheSong();break;case 35:Te.playNoteAndGoForwardInTheSong();break;case 112:console.log("F1");break;case 113:console.log("F2");break;case 114:console.log("F3");break;case 115:console.log("F4");break;case 116:console.log("F5");break;case 192:console.log("SHIFT + `"),ge();break;case 32:console.log("SPACE");break;case 27:console.log("ESC"),o?ge():(console.log("Reset Offsets"),ue=0,me.drawPiano());break;case 8:ve.deleteLastGroup();break;case 9:ve.mergeLastTwoGroups();break;case 38:h.prevTrack();break;case 40:h.nextTrack();break;case 37:r?h.firstNoteGroup():o?Te.playAndGoBackwardOnCurrentTrack():h.prevNoteGroup();break;case 39:r?h.lastNoteGroup():o?Te.playAndGoForwardOnCurrentTrack():h.nextNoteGroup();break;default:te.keyCodeToPianoKeyNumber.hasOwnProperty(t)&&be.playOneNote(te.keyCodeToPianoKeyNumber[t])}}else console.log("UI.onKeyDown: Piano has not been initialized.")},e.onKeyUp=function(e){(e.ctrlKey||e.shiftKey)&&(de=0)};var t,r=e.WHITE_KEY_WIDTH=20,n=e.WHITE_KEY_HEIGHT=120,o=e.BLACK_KEY_WIDTH=16,a=e.BLACK_KEY_HEIGHT=72,i=null,s=0,c=0;e.setCanvasContext=function(e,t,r){i=e,s=t,c=r},e.drawPiano=function(){if(i){var e=i;e.fillStyle="#333",e.fillRect(0,0,s,c),function(e){e.strokeStyle="#000",e.lineWidth=.2,e.fillStyle="#FFF";for(var t=0;t<52;t++)e.fillRect(t*r,0,r,n),e.strokeRect(t*r,0,r,n);e.fillStyle="#FCC",e.fillRect(23*r,0,r,n)}(e),function(e){e.fillStyle="#323232";for(var t=0;t<7;t++)for(var r=0;r<7;r++)1!=r&&4!=r&&e.fillRect(12+20*(r+7*t),0,o,a);e.fillRect(992,0,16,72)}(e),function(e){e.textAlign="center";for(var t=1;t<=88;t++){var r=t%12;if(fe.includes(r)){var n=Math.floor(t/12),o=fe.indexOf(r),a=7*n+o,i=he[o];e.font="c"==i?"bold 13px Tahoma":"13px Tahoma",e.fillStyle="#777",e.fillText(i,20*a+10,100),e.font="12px Consolas",e.fillStyle="#999",e.fillText(t,20*a+10,115)}}e.font="15px Consolas",e.fillStyle="#FFF",e.textAlign="center";for(var s=7*(ue+1),c=te.labels.length,u=0;u<c;u++)e.fillText(te.labels[u],20*(u+s)+10,140)}(e),function(e){var t=h.getCurrentTrackNumber(),r=h.getCurrentNoteGroupNumber(),n=ve.getNoteGroupFromTrack(r,t);if(!n)return;var o,a=Z(n.notes);try{for(a.s();!(o=a.n()).done;){var i=o.value,s=i.pianoNote%12,c=Math.floor((i.pianoNote-1)/12);if(e.beginPath(),le.includes(s)){var u=7*c+le.indexOf(s);e.arc(20*u+20,60,6,0,2*Math.PI,!1)}else{var l=7*c+fe.indexOf(s);e.arc(20*l+10,96,7,0,2*Math.PI,!1)}e.fillStyle="rgba(220,220,10,.82)",e.fill()}}catch(f){a.e(f)}finally{a.f()}}(e)}},function(e){var r=null,n=null,o=function(){return console.log("DEFAULT IS-CHECKED. RETURN TRUE."),!0},a=function(e){console.log("DEFAULT SET CHECKED: "+e)};e.setup=function(e){r=new Array(e),n=new Array(e),r.fill(o),n.fill(a),ve.reset();for(var t=0;t<e;t++)ve.addTrack();h.setupIndexes(e)},e.addNewTrack=function(){},e.getTextFileFromTracks=function(){console.log("getTextFileFromTracks Song Version: "+be.getSongVersion());var e=ve.getNoteGroupsFromTracks();if(1===be.getSongVersion()){var t=[];return e.forEach((function(e){t.push(e.toStringV1())})),t.join(" ")}return e.join(" ")},e.getTrackNumbersToIncludeInMIDIFile=function(){for(var e=[],r=ve.getNumTracks(),n=0;n<r;n++)t.isChecked(n)&&e.push(n);return e},e.setTrackCheckedCallbacks=function(e,t,o){console.log("setTrackCheckedCallbacks "+e+" "+typeof t+" "+typeof o),r||(r=[]),r[e]=t,n||(n=[]),n[e]=o},e.setChecked=function(e,t){console.log("setChecked "+e+" => "+t);var r=n[e];r?(r(t),oe.saveCheckBoxes(),ve.resetCache()):console.log("NULL SETCHECKED CALLBACK")},e.isChecked=function(e){var t=r[e];return!!t&&t()},e.checkAllNonEmptyTracks=function(){for(var e=ve.getNumTracks(),r=0;r<e;r++)ve.getNumNoteGroupsInTrack(r)>0?t.setChecked(r,!0):t.setChecked(r,!1)},e.getCheckedStateForAllTracks=function(){return r.map((function(e){if(e){var t=e();return console.log(t),t}return!1}))},e.setCheckedStateForAllTracks=function(e){for(var r=0;r<e.length;r++){var n=e[r];t.setChecked(r,n)}}}(t||(t=e.Tracks||(e.Tracks={})))}(me||(me={})),function(e){var t=[],r=null,n=new Set;function o(e){return e<0||e>=t.length?0:t[e].length}e.reset=function(){t.length=0,ve.resetRecentlyUpdatedTrackNumbers(),ve.resetCache()},e.resetCache=function(){r=null},e.addTrack=function(){var e=new O;e.trackNumber=t.length,t.push(e),n.add(e.trackNumber)},e.addNoteGroupToTrack=function(e,r){ve.resetCache();var o=t[r];return e.trackNumber=r,e.noteNumber=o.length,o.push(e),n.add(r),t[r].length},e.getNumTracks=function(){return t.length},e.getNumNoteGroupsInTrack=o,e.isTrackEmpty=function(e){return 0===o(e)},e.getTracksAsJSON=function(){return JSON.stringify(t)},e.mergeLastTwoGroups=function(){var e=h.getCurrentTrackNumber(),r=t[e];if(r.length>=2){var o=k.merge(r.pop(),r.pop());ve.addNoteGroupToTrack(o,e),h.setTrackAndNoteGroup(e,r.length-1),n.add(e),Ee()}},e.deleteLastGroup=function(){var e=h.getCurrentTrackNumber();t[e].pop(),h.setTrackAndNoteGroup(e,t[e].length-1),n.add(e),Ee()},e.getNoteGroupFromTrack=function(e,r){if(r<0||r>=t.length)return null;var n=t[r];return e<0||e>=n.length?null:n[e]},e.getNoteGroupsFromTracks=function(){if(null!==r)return r;console.log("Recompute Cached NoteGroups!!!");for(var e=[],n=0,o=[],a=t.length,i=0;i<a;i++)o.push(0);for(;;){for(var s=Number.MAX_VALUE,c=null,u=null,l=0;l<a;l++){var f=t[l],h=f.length,d=o[l];if(0!==h&&me.Tracks.isChecked(l)&&!(d>=h)){var p=f[d];p.playTimeMillis<s&&(s=p.playTimeMillis,c=p,u=f)}}if(!c)break;var g=c.copy();-1===g.playTimeMillis&&(g.playTimeMillis=n);var E=u.trackNumber,T=o[E];g.noteNumber=T,o[E]++,e.push(g),n=g.playTimeMillis+250}return r=e,e},e.getNoteGroupID=function(e,t){return"t".concat(e,"_n").concat(t)},e.getRecentlyUpdatedTrackNumbersAsArray=function(){return Array.from(n)},e.resetRecentlyUpdatedTrackNumbers=function(){n.clear()}}(ve||(ve={}));var be,Ne=Te,_e=ve,Oe=me,ke=me.Tracks;!function(e){e.Playback=Ne;var t=e.Song=_e,r=e.UI=Oe,n=e.Tracks=ke,o=I.a.MIN_SONG_VERSION;e.getSongVersion=function(){return o},e.setSongVersion=function(e){o=e},e.setDispatchFunction=function(e){ce=e},e.start=function(){console.log("App.start()"),ne.setup(),oe.load(),r.showNoteGroupsForTracks(),r.setupCopyHandler(),r.drawPiano()},e.startAudio=function(){pe=new z.b(z.a.SynthBasic)},e.saveSongVersionToLocalStorage=function(e){be.setSongVersion(e),console.log("saveSongVersionToLocalStorage "+e),oe.saveVersionToggle(e)},e.fillTracksWithNoteGroupsExtractedFromMIDIEvents=function(e,n){if(console.log("MIDI File Passed In: "+e),e){r.Tracks.setup(e.tracks.length);var o,a=null,i=-1,s=-1,c=Z(n);try{for(c.s();!(o=c.n()).done;){var u=o.value,l=u.type,f=u.subtype,h=u.playTime;h=Math.round(1e3*h)/1e3;var d=u.param1,p=u.param2,g=W.m2p(d),E=new S(g,1,p);console.log("VELOCITY "+p);var T=u.track;if(T||(T=0),f===ie.EVENT_MIDI_NOTE_ON)if(h<=i+0&&T===s)a.addNote(E);else{var m=new k(E,h,T);t.addNoteGroupToTrack(m,T),a=m,s=T,i=h}else console.log("Unhandled Event:"),X.printTypeAndSubtype(l,f)}}catch(v){c.e(v)}finally{c.f()}Ee()}},e.getDownloadData_TEXT=function(){var e=n.getTextFileFromTracks();return btoa(e)},e.getDownloadData_MIDI=function(){var e=n.getTrackNumbersToIncludeInMIDIFile(),r=X.createFileFromTracks(e,t.getNoteGroupsFromTracks());return btoa(r)},e.playOneNote=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e%12,a=fe.indexOf(o),i=he[a],s=0;r&&(s=de,c.a.isNoteSharp(i)&&s++,c.a.isNoteFlat(i)&&s--);var u=e+s+12*ue;if(!(u<1||u>88)){var l=h.getCurrentTrackNumber(),f=t.addNoteGroupToTrack(new k(new S(u)),l);n.setChecked(l,!0),be.playPianoNote(u),h.setTrackAndNoteGroup(l,f-1),Ee()}},e.playPianoNote=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:127;if(null!==pe){var r=1;pe.play(e,r,t/127)}else console.log("playPianoNote: Piano has not been initialized.")},e.loadFirstFile=function(e){if(e.length>0){var t=e[0];X.readFileAsync(t).then((function(e){ce({type:q.a.FileChooser.onFileLoaded})}))}}}(be||(be={}));var Se=be,Ie=r("ZPpq"),Me=function(e){var t=e.children;return Object(o.jsxs)("div",{className:"jsx-1451445103 bottom-panel",children:[Object(o.jsx)(Ie.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(e,t){console.log("Here are the dropped files",e),Se.Playback.stop(),Se.loadFirstFile(e)},children:Object(o.jsx)("div",{className:"jsx-1451445103 bottom-panel-padding",children:t})}),Object(o.jsx)(i.a,{id:"1451445103",children:["div.bottom-panel{background-color:#666;text-align:center;color:#444;position:absolute;bottom:0px;left:0px;right:0px;}","div.bottom-panel-padding{padding-top:20px;padding-bottom:20px;}",".file-drop>.file-drop-target.file-drop-dragging-over-frame{background-color:#dffafb;font-weight:bold;color:#f66;}"]})]})},we=r("q1tI"),Ae=function(){var e=Object(we.useState)(I.a.DEFAULT_DOWNLOAD_DATA),t=e[0],r=e[1],n=Object(we.useState)(I.a.DEFAULT_DOWNLOAD_DATA),a=n[0],s=n[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"jsx-2735342158",children:["Save as\xa0",Object(o.jsx)("a",{href:"data:audio/midi;base64,"+t,download:"song.mid",onMouseOver:function(){var e=Se.getDownloadData_MIDI();r(e)},className:"jsx-2735342158",children:"MIDI"}),"\xa0or\xa0",Object(o.jsx)("a",{href:"data:text/plain;base64,"+a,download:"song.txt",onMouseOver:function(){var e=Se.getDownloadData_TEXT();s(e)},className:"jsx-2735342158",children:"TEXT"})]}),Object(o.jsx)(i.a,{id:"2735342158",children:["div.jsx-2735342158{float:left;margin:3px 0px;}"]})]})},Ce=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"jsx-1997395813 shortcuts",children:["ctrl \u2192 flat \xa0\xa0\xa0 alt \u2192 sharp \xa0\xa0\xa0 shift + esc \u2192 clear",Object(o.jsx)("br",{className:"jsx-1997395813"}),"page up/dn \u2192 +/- octave \xa0\xa0\xa0 tab \u2192 combine \xa0\xa0\xa0 cmd + c \u2192 copy"]}),Object(o.jsx)(i.a,{id:"1997395813",children:["div.jsx-1997395813{float:right;font-size:75%;text-align:right;}"]})]})},xe=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"jsx-4126208708 upload-file-panel bottom-info",children:[Object(o.jsx)("input",{type:"file",id:"filechooser",onChange:function(e){Se.loadFirstFile(e.target.files)},className:"jsx-4126208708"}),Object(o.jsx)("label",{id:"filechooserlabel",htmlFor:"filechooser",onClick:function(e){document.getElementById("filechooser").value=null},className:"jsx-4126208708",children:"Upload a MIDI file!"})]}),Object(o.jsx)(i.a,{id:"4126208708",children:[".upload-file-panel.jsx-4126208708{color:#4df;-webkit-text-decoration:underline;text-decoration:underline;}","#filechooser.jsx-4126208708{display:none;}","#filechooserlabel.jsx-4126208708{cursor:pointer;}"]})]})},De=null,je=0,Fe=0,Re=!1,Ue=[1,3,4,6,8,9,11],Pe=[2,0,5,7,0,10,12],Le=Se.UI.BLACK_KEY_HEIGHT,Ve=Se.UI.BLACK_KEY_HEIGHT;function Ge(e,t){var r=0;if(t<=Ve){var n=Math.floor((e-12)/20);r=Math.floor(n/7);var o=n%7,a=(e-12)%20;if(a>=0&&a<=Le&&1!==o&&4!==o)return 12*r+Pe[o]}var i=Math.floor(e/20),s=i%7;return 12*(r=Math.floor(i/7))+Ue[s]}var He,Be=-1;!function(e){var t,r,n=function(e){console.log("OFFSET LEFT "+e.currentTarget.offsetLeft),console.log("OFFSET TOP "+e.currentTarget.offsetTop);var n=e.currentTarget.getBoundingClientRect();t=Math.round(e.clientX-n.left),r=Math.round(e.clientY-n.top)};e.onMouseDown=function(e){n(e),Re=!0,console.log("Mouse Down at "+t+" , "+r);var o=Ge(t,r);Be=o,Se.playOneNote(o)},e.onMouseMove=function(e){if(Re){n(e),console.log("Mouse Move at "+t+" , "+r);var o=Ge(t,r);o!==Be&&(Be=o,Se.playOneNote(o))}},e.onMouseUp=function(e){Re=!1,Be=-1,n(e),console.log("Mouse Up at "+t+" , "+r)},e.onMouseLeave=function(e){Re=!1,Be=-1,n(e),console.log("Mouse Leave at "+t+" , "+r)}}(He||(He={}));var Ke=function(){var e=Object(we.useRef)(null);return Object(we.useEffect)((function(){var t;(t=e.current).width=2080,t.height=300,t.style.width="1040px",t.style.height="150px",je=t.width,Fe=t.height,(De=t.getContext("2d")).scale(2,2),Se.UI.setCanvasContext(De,je,Fe),Se.UI.drawPiano()}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"jsx-4154492739",children:Object(o.jsx)("canvas",{ref:e,width:"1040",height:"150",onMouseDown:He.onMouseDown,onMouseMove:He.onMouseMove,onMouseUp:He.onMouseUp,onMouseLeave:He.onMouseLeave,className:"jsx-4154492739"})}),Object(o.jsx)(i.a,{id:"4154492739",children:["div.jsx-4154492739{margin:auto;margin-top:12px;border:1px solid #444;width:1040px;height:150px;}","canvas.jsx-4154492739{cursor:pointer;display:block;}"]})]})},Ye=function(e){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{id:"buttons",children:[Object(o.jsx)("a",{id:"play-button",onClick:function(){e.onPlay()},children:"Play"})," ","|"," ",Object(o.jsx)("a",{id:"pause-button",onClick:function(){e.onPause()},children:"Pause"})," ","|"," ",Object(o.jsx)("a",{id:"stop-button",onClick:function(){e.onStop()},children:"Stop"})]})})},Je=r("ODXe"),Xe=r("/MKj"),We=r("094J"),qe=I.a.StoreKeys,ze=function(e){var t=e.trackNumber,r=Object(We.a)("track-checkbox-".concat(t))(!1),n=Object(Je.a)(r,2),a=n[0],s=n[1],c=Object(Xe.b)();Object(we.useEffect)((function(){}),[]);var u=Object(Xe.c)((function(e){return console.log("useSelector for checkboxMapping"),console.log(e),e[qe.TRACK_NUMBER_TO_CHECKBOX_VALUE]}));return Object(we.useEffect)((function(){console.log("CHECKBOX MAPPING CHANGED"),console.log(u)}),[u]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{id:"track-".concat(t,"-checkbox"),type:"checkbox",onChange:function(e){console.log("CHECKBOX UI CHANGED VALUE");var r=e.target.checked;s(r);var n={};n[qe.TRACK_NUMBER]=t,n[qe.CHECKBOX_VALUE]=r,c({type:q.a.Toggle.onCheckboxChanged,payload:n})},checked:a,className:"jsx-3375857760 checkbox"}),Object(o.jsx)(i.a,{id:"3375857760",children:["input.jsx-3375857760{box-sizing:border-box;width:20px;height:40px;border:0;padding:0;margin:0;margin-right:8px;}"]})]})},Qe=r("TSYQ"),$e=r.n(Qe),Ze=Se.Song,et=function(e){var t=e.trackNumber,r=e.trackIsHighlighted,n=$e()({highlight:r}),a=Ze.isTrackEmpty(t),s=Ze.getNumNoteGroupsInTrack(t);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{id:"track-".concat(t,"-info"),className:"jsx-174604777 "+(n||""),children:a?"\u2715":s}),Object(o.jsx)(i.a,{id:"174604777",children:["div.jsx-174604777{box-sizing:border-box;background-color:#f0f4ff;color:#666;margin:0 0;width:40px;height:40px;line-height:40px;text-align:center;font-size:10pt;overflow-x:scroll;overflow-y:hidden;white-space:nowrap;display:inline-block;}","div.highlight.jsx-174604777{background-color:#cfeaeb;}"]})]})},tt=r("Djxk"),rt=r.n(tt),nt=Se.Song,ot=I.a.StoreKeys,at=function(e){var t=e.id,r=e.trackNumber,n=e.noteGroupNumber,a=e.isHighlighted,i=nt.getNoteGroupFromTrack(n,r),s=Object(Xe.c)((function(e){return e[ot.PLAYED_NOTEGROUP_ID]}))==nt.getNoteGroupID(r,n),c=i.numNotes>1,u=$e()("notegroup",{multiple:c,highlight:a},s?rt.a.played:"");return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{id:t,className:u,children:i.toString()})})},it=Se.Song,st=function(e){for(var t=e.trackNumber,r=e.highlightedNoteGroupNumber,n=it.getNumNoteGroupsInTrack(t),a=[],s=0;s<n;s++){var c=s==r,u=it.getNoteGroupID(t,s);a.push(Object(o.jsx)(at,{id:u,trackNumber:t,noteGroupNumber:s,isHighlighted:c},u))}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{id:"track-".concat(t,"-notes"),className:"jsx-432594885",children:a}),Object(o.jsx)(i.a,{id:"792694884",children:["div.jsx-432594885{display:inline-block;box-sizing:border-box;width:90%;height:40px;background-color:#dffafb;text-align:left;font-size:10pt;overflow-x:scroll;overflow-y:hidden;margin:0;padding:0 10px;white-space:nowrap;line-height:100%;-webkit-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}"]}),Object(o.jsx)(i.a,{id:"2891780104",children:[".notegroup{box-sizing:border-box;display:inline-block;height:32px;line-height:32px;padding:0px 3px;margin:4px 1px 0px 1px;}",".notegroup.highlight{color:#f67;background-color:rgba(238,119,153,0.2);}",".notegroup.multiple{color:#59b;}"]})]})},ct=Se.Song,ut=I.a.StoreKeys,lt=function(e){for(var t=e.highlightedTrackNumber,r=e.highlightedNoteGroupNumber,n=Object(Xe.c)((function(e){return e[ut.UPDATED_TRACKS_TIMESTAMP]})),a=ct.getNumTracks(),s=[],c=0;c<a;c++){var u=ct.isTrackEmpty(c),l=t==c,f=$e()("track",{empty:u,highlighted:l}),h="track-".concat(c),d=l?r:-1;s.push(Object(o.jsxs)("div",{id:h,className:f,"last-update":n,children:[Object(o.jsx)(ze,{trackNumber:c}),Object(o.jsx)(et,{trackNumber:c,trackIsHighlighted:l}),Object(o.jsx)(st,{trackNumber:c,highlightedNoteGroupNumber:d})]},h))}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"jsx-4002085344 track-container",children:s}),Object(o.jsx)(i.a,{id:"4002085344",children:[".track-container{margin-bottom:40px;box-sizing:border-box;font-family:Inconsolata,Menlo,Monaco,sans-serif;}",".track{height:48px;box-sizing:border-box;padding-top:3px;}",".track.highlighted{background-color:#333;}"]})]})},ft=function(){var e=Object(Xe.b)(),t=Object(Xe.c)((function(e){return e.songVersion}));var r=$e()("version-toggle",{selected:1===t}),n=$e()("version-toggle",{selected:2===t});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"jsx-2124608121 version-div",children:[Object(o.jsx)("div",{id:"toggle_v1",onClick:function(){var t={};t[I.a.StoreKeys.SONG_VERSION]=1,e({type:q.a.Toggle.onSongVersionFormatChanged,payload:t})},className:"jsx-2124608121 "+(r||""),children:"V1"}),Object(o.jsx)("div",{id:"toggle_v2",onClick:function(){var t={};t[I.a.StoreKeys.SONG_VERSION]=2,e({type:q.a.Toggle.onSongVersionFormatChanged,payload:t})},className:"jsx-2124608121 "+(n||""),children:"V2"})]}),Object(o.jsx)(i.a,{id:"2124608121",children:[".version-div.jsx-2124608121{float:left;margin-left:8px;}",".version-toggle.jsx-2124608121{float:left;background-color:#eee;color:#ccc;padding:3px 15px;cursor:pointer;}",".version-toggle.selected.jsx-2124608121{color:#333;background-color:#cdedff;}"]})]})},ht=r("t1q6"),dt=r("xgb5"),pt=I.a.StoreKeys,gt=Se.Playback,Et=Se.Song,Tt=Se.UI,mt=function(){var e=Object(we.useState)(!0),t=e[0],r=e[1],n=Object(we.useState)(""),a=n[0],u=n[1],l=Object(we.useState)(""),f=l[0],d=l[1],p=Object(we.useState)(0),g=p[0],E=p[1],T=Object(we.useState)(0),m=T[0],v=T[1],y=Object(we.useRef)(),b=Object(Xe.b)();Object(we.useEffect)((function(){h.setupCallbacks(E,v,Tt.drawPiano,Et.getNumTracks,Et.getNumNoteGroupsInTrack,Tt.scrollNoteGroupIntoView),Se.setDispatchFunction(b),c.a.setRef(y),Se.start()}),[]),Object(dt.a)("keydown",(function(e){c.a.isFocusedOnInputs()||Se.UI.onKeyDown(e)})),Object(dt.a)("keyup",(function(e){c.a.isFocusedOnInputs()||Se.UI.onKeyUp(e)}));var N=Object(Xe.c)((function(e){return e[pt.SONG_VERSION]}));Object(we.useEffect)((function(){Se.saveSongVersionToLocalStorage(N)}),[N]);var _=Object(Xe.c)((function(e){return e[pt.FILE_TIMESTAMP]}));return Object(we.useEffect)((function(){console.log("Loaded a file at timestamp: ".concat(_));var e=X.getLoadedFile(),t=X.getLoadedMIDIEvents();if(Se.fillTracksWithNoteGroupsExtractedFromMIDIEvents(e,t),null!==e){u("Loaded File: ".concat(X.getFileName()," | Size: ").concat(X.getFileSize()," bytes | Num Tracks: ").concat(X.getNumTracks()));var r=Math.round(100*X.getDurationInSeconds())/100;d("Num Tracks: ".concat(X.getNumTracks()," | Duration: ").concat(r," secs"))}}),[_]),Object(o.jsxs)(o.Fragment,{children:[t?Object(o.jsx)(ht.a,{initialOpenState:t,preloadNow:function(){Se.startAudio(),r(!1)}}):null,Object(o.jsx)(Ae,{}),Object(o.jsx)(ft,{}),Object(o.jsx)(Ce,{}),Object(o.jsx)(s.a,{ref:y,localStorageKeyPrefix:"piano",style:{float:"right"}}),Object(o.jsxs)("div",{id:"content",className:"jsx-4048278329 content",children:[Object(o.jsx)(lt,{highlightedTrackNumber:g,highlightedNoteGroupNumber:m}),Object(o.jsx)(Ke,{})]}),Object(o.jsxs)(Me,{children:[Object(o.jsx)(xe,{}),Object(o.jsx)("div",{id:"file-info",className:"jsx-4048278329 bottom-info",children:a}),Object(o.jsx)("div",{id:"song-info",className:"jsx-4048278329 bottom-info",children:f}),Object(o.jsx)(Ye,{onPlay:gt.play,onPause:gt.pause,onStop:gt.stop})]}),Object(o.jsx)(i.a,{id:"4048278329",children:["html{margin:15px 1% 0px 1%;}","html.drag{background-color:#dffafb;}",".content{width:100%;text-align:center;clear:both;padding-top:10px;}",".bottom-info{margin-bottom:10px;}","::-webkit-scrollbar{width:0px;height:3px;}","::-webkit-scrollbar-thumb{border-radius:0px;background-color:rgba(0,0,0,0.18);}","@media only screen and (max-width:1024px){.checkbox{width:18px;}.track-info{width:20px;}.track{width:88%;}}"]})]})},vt=!0;t.default=function(){return Object(o.jsx)(mt,{})}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},ZPpq:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r("17x9")),i=o(r("q1tI")),s=function(e){function t(r){var n=e.call(this,r)||this;return n.resetDragging=function(){n.frameDragCounter=0,n.setState({draggingOverFrame:!1,draggingOverTarget:!1})},n.handleWindowDragOverOrDrop=function(e){e.preventDefault()},n.handleFrameDrag=function(e){if(t.eventHasFiles(e))return n.frameDragCounter+="dragenter"===e.type?1:-1,1===n.frameDragCounter?(n.setState({draggingOverFrame:!0}),void(n.props.onFrameDragEnter&&n.props.onFrameDragEnter(e))):0===n.frameDragCounter?(n.setState({draggingOverFrame:!1}),void(n.props.onFrameDragLeave&&n.props.onFrameDragLeave(e))):void 0},n.handleFrameDrop=function(e){n.state.draggingOverTarget||(n.resetDragging(),n.props.onFrameDrop&&n.props.onFrameDrop(e))},n.handleDragOver=function(e){t.eventHasFiles(e)&&(n.setState({draggingOverTarget:!0}),!t.isIE()&&n.props.dropEffect&&(e.dataTransfer.dropEffect=n.props.dropEffect),n.props.onDragOver&&n.props.onDragOver(e))},n.handleDragLeave=function(e){n.setState({draggingOverTarget:!1}),n.props.onDragLeave&&n.props.onDragLeave(e)},n.handleDrop=function(e){if(n.props.onDrop&&t.eventHasFiles(e)){var r=e.dataTransfer?e.dataTransfer.files:null;n.props.onDrop(r,e)}n.resetDragging()},n.handleTargetClick=function(e){n.props.onTargetClick&&n.props.onTargetClick(e),n.resetDragging()},n.stopFrameListeners=function(e){e&&(e.removeEventListener("dragenter",n.handleFrameDrag),e.removeEventListener("dragleave",n.handleFrameDrag),e.removeEventListener("drop",n.handleFrameDrop))},n.startFrameListeners=function(e){e&&(e.addEventListener("dragenter",n.handleFrameDrag),e.addEventListener("dragleave",n.handleFrameDrag),e.addEventListener("drop",n.handleFrameDrop))},n.frameDragCounter=0,n.state={draggingOverFrame:!1,draggingOverTarget:!1},n}return n(t,e),t.prototype.componentDidMount=function(){this.startFrameListeners(this.props.frame),this.resetDragging(),window.addEventListener("dragover",this.handleWindowDragOverOrDrop),window.addEventListener("drop",this.handleWindowDragOverOrDrop)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.frame!==this.props.frame&&(this.resetDragging(),this.stopFrameListeners(this.props.frame),this.startFrameListeners(e.frame))},t.prototype.componentWillUnmount=function(){this.stopFrameListeners(this.props.frame),window.removeEventListener("dragover",this.handleWindowDragOverOrDrop),window.removeEventListener("drop",this.handleWindowDragOverOrDrop)},t.prototype.render=function(){var e=this.props,t=e.children,r=e.className,n=e.targetClassName,o=e.draggingOverFrameClassName,a=e.draggingOverTargetClassName,s=this.state,c=s.draggingOverTarget,u=n;return s.draggingOverFrame&&(u+=" "+o),c&&(u+=" "+a),i.default.createElement("div",{className:r,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},i.default.createElement("div",{className:u,onClick:this.handleTargetClick},t))},t.isIE=function(){return"undefined"!==typeof window&&(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>0)},t.eventHasFiles=function(e){var t=!1;if(e.dataTransfer){var r=e.dataTransfer.types;for(var n in r)if("Files"===r[n]){t=!0;break}}return t},t.propTypes={className:a.default.string,targetClassName:a.default.string,draggingOverFrameClassName:a.default.string,draggingOverTargetClassName:a.default.string,onDragOver:a.default.func,onDragLeave:a.default.func,onDrop:a.default.func,onTargetClick:a.default.func,dropEffect:a.default.oneOf(["copy","move","link","none"]),frame:function(e,t,r){var n=e[t];return null==n?new Error("Warning: Required prop `"+t+"` was not specified in `"+r+"`"):n===document||n instanceof HTMLElement?void 0:new Error("Warning: Prop `"+t+"` must be one of the following: document, HTMLElement!")},onFrameDragEnter:a.default.func,onFrameDragLeave:a.default.func,onFrameDrop:a.default.func},t.defaultProps={dropEffect:"copy",frame:"undefined"===typeof window?void 0:window.document,className:"file-drop",targetClassName:"file-drop-target",draggingOverFrameClassName:"file-drop-dragging-over-frame",draggingOverTargetClassName:"file-drop-dragging-over-target"},t}(i.default.PureComponent);t.FileDrop=s},dTTX:function(e,t,r){"use strict";var n=r("SFhg"),o=r("zq3Y"),a=r("hLrB"),i=r("3h94");function s(e,t){var r,a,i,s;if(e){if(25>(e=function(e){if(e){if(e instanceof ArrayBuffer)return e;if(e instanceof Uint8Array)return new Uint8Array(e).buffer}throw new Error("Unsupported buffer type, need ArrayBuffer or Uint8Array")}(e)).byteLength)throw new Error("A buffer of a valid MIDI file must have, at least, a size of 25bytes.");for(this.header=new n(e,t),this.tracks=[],a=n.HEADER_LENGTH,i=0,s=this.header.getTracksCount();i<s;i++){if(t&&a>=e.byteLength-1)throw new Error("Couldn't find datas corresponding to the track #"+i+".");r=new o(e,a,t),this.tracks.push(r),a+=r.getTrackLength()+8}if(t&&a!==e.byteLength)throw new Error("It seems that the buffer contains too much datas.")}else this.header=new n,this.tracks=[new o]}s.prototype.getEvents=function(e,t){var r,n,o,i,s,c,u=0,l=[],f=this.header.getFormat(),h=this.header.getTickResolution();if(1!==f||1===this.tracks.length)for(o=0,i=this.tracks.length;o<i;o++)for(u=2===f&&u?u:0,n=(r=a.createParser(this.tracks[o].getTrackContent(),0,!1)).next();n;)u+=n.delta?n.delta*h/1e3:0,n.type===a.EVENT_META&&n.subtype===a.EVENT_META_SET_TEMPO&&(h=this.header.getTickResolution(n.tempo)),e&&n.type!==e||t&&(!n.subtype||n.subtype!==t)||(n.playTime=u,l.push(n)),n=r.next();else{for(s=[],c=-1,o=0,i=this.tracks.length;o<i;o++)s[o]={},s[o].parser=a.createParser(this.tracks[o].getTrackContent(),0,!1),s[o].curEvent=s[o].parser.next();do{for(c=-1,o=0,i=s.length;o<i;o++)s[o].curEvent&&(-1===c||s[o].curEvent.delta<s[c].curEvent.delta)&&(c=o);if(-1!==c){for(o=0,i=s.length;o<i;o++)o!==c&&s[o].curEvent&&(s[o].curEvent.delta-=s[c].curEvent.delta);u+=(n=s[c].curEvent).delta?n.delta*h/1e3:0,n.type===a.EVENT_META&&n.subtype===a.EVENT_META_SET_TEMPO&&(h=this.header.getTickResolution(n.tempo)),e&&n.type!==e||t&&(!n.subtype||n.subtype!==t)||(n.playTime=u,n.track=c,l.push(n)),s[c].curEvent=s[c].parser.next()}}while(-1!==c)}return l},s.prototype.getMidiEvents=function(){return this.getEvents(a.EVENT_MIDI)},s.prototype.getLyrics=function(){var e,t,r,n=this.getEvents(a.EVENT_META),o=[],s=[];for(t=0,r=n.length;t<r;t++)(e=n[t]).subtype===a.EVENT_META_LYRICS?s.push(e):e.subtype===a.EVENT_META_TEXT&&("@"===String.fromCharCode(e.data[0])?"T"===String.fromCharCode(e.data[1])||"I"===String.fromCharCode(e.data[1])||String.fromCharCode(e.data[1]):0===String.fromCharCode.apply(String,e.data).indexOf("words")?o.length=0:0!==e.playTime&&o.push(e));2<s.length?o=s:o.length||(o=[]);try{o.forEach((function(e){e.text=i.getStringFromBytes(e.data,0,e.length,!0)}))}catch(c){o.forEach((function(e){e.text=e.data.map((function(e){return String.fromCharCode(e)})).join("")}))}return o},s.prototype.getTrackEvents=function(e){var t,r,n=[];if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=(r=a.createParser(this.tracks[e].getTrackContent(),0,!1)).next();do{n.push(t),t=r.next()}while(t);return n},s.prototype.setTrackEvents=function(e,t){var r,n;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");if(!t||!t.length)throw Error("A track must contain at least one event, none given.");r=a.getRequiredBufferLength(t),n=new Uint8Array(r),a.writeToTrack(t,n),this.tracks[e].setTrackContent(n)},s.prototype.deleteTrack=function(e){if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");this.tracks.splice(e,1),this.header.setTracksCount(this.tracks.length)},s.prototype.addTrack=function(e){var t;if(e>this.tracks.length||0>e)throw Error("Invalid track index ("+e+")");t=new o,e===this.tracks.length?this.tracks.push(t):this.tracks.splice(e,0,t),this.header.setTracksCount(this.tracks.length)},s.prototype.getContent=function(){var e,t,r,o,a,i,s,c,u;for(e=n.HEADER_LENGTH,o=0,a=this.tracks.length;o<a;o++)e+=this.tracks[o].getTrackLength()+8;for(t=new Uint8Array(e),r=new Uint8Array(this.header.datas.buffer,this.header.datas.byteOffset,n.HEADER_LENGTH),o=0,a=n.HEADER_LENGTH;o<a;o++)t[o]=r[o];for(i=0,s=this.tracks.length;i<s;i++)for(r=new Uint8Array(this.tracks[i].datas.buffer,this.tracks[i].datas.byteOffset,this.tracks[i].datas.byteLength),c=0,u=this.tracks[i].datas.byteLength;c<u;c++)t[o++]=r[c];return t.buffer},s.Header=n,s.Track=o,e.exports=s},"hKI/":function(e,t,r){(function(t){var r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),l=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return u.Date.now()};function p(e,t,r){var n,o,a,i,s,c,u=0,l=!1,p=!1,T=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=n,a=o;return n=o=void 0,u=t,i=e.apply(a,r)}function v(e){return u=e,s=setTimeout(b,t),l?m(e):i}function y(e){var r=e-c;return void 0===c||r>=t||r<0||p&&e-u>=a}function b(){var e=d();if(y(e))return N(e);s=setTimeout(b,function(e){var r=t-(e-c);return p?h(r,a-(e-u)):r}(e))}function N(e){return s=void 0,T&&n?m(e):(n=o=void 0,i)}function _(){var e=d(),r=y(e);if(n=arguments,o=this,c=e,r){if(void 0===s)return v(c);if(p)return s=setTimeout(b,t),m(c)}return void 0===s&&(s=setTimeout(b,t)),i}return t=E(t)||0,g(r)&&(l=!!r.leading,a=(p="maxWait"in r)?f(E(r.maxWait)||0,t):a,T="trailing"in r?!!r.trailing:T),_.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=c=o=s=void 0},_.flush=function(){return void 0===s?i:N(d())},_}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var s=o.test(e);return s||a.test(e)?i(e.slice(2),s?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return g(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),p(e,t,{leading:n,maxWait:t,trailing:o})}}).call(this,r("yLpj"))},hLrB:function(e,t,r){"use strict";function n(){throw new Error("MIDIEvents function not intended to be run.")}n.EVENT_META=255,n.EVENT_SYSEX=240,n.EVENT_DIVSYSEX=247,n.EVENT_MIDI=8,n.EVENT_META_SEQUENCE_NUMBER=0,n.EVENT_META_TEXT=1,n.EVENT_META_COPYRIGHT_NOTICE=2,n.EVENT_META_TRACK_NAME=3,n.EVENT_META_INSTRUMENT_NAME=4,n.EVENT_META_LYRICS=5,n.EVENT_META_MARKER=6,n.EVENT_META_CUE_POINT=7,n.EVENT_META_MIDI_CHANNEL_PREFIX=32,n.EVENT_META_END_OF_TRACK=47,n.EVENT_META_SET_TEMPO=81,n.EVENT_META_SMTPE_OFFSET=84,n.EVENT_META_TIME_SIGNATURE=88,n.EVENT_META_KEY_SIGNATURE=89,n.EVENT_META_SEQUENCER_SPECIFIC=127,n.EVENT_MIDI_NOTE_OFF=8,n.EVENT_MIDI_NOTE_ON=9,n.EVENT_MIDI_NOTE_AFTERTOUCH=10,n.EVENT_MIDI_CONTROLLER=11,n.EVENT_MIDI_PROGRAM_CHANGE=12,n.EVENT_MIDI_CHANNEL_AFTERTOUCH=13,n.EVENT_MIDI_PITCH_BEND=14,n.MIDI_1PARAM_EVENTS=[n.EVENT_MIDI_PROGRAM_CHANGE,n.EVENT_MIDI_CHANNEL_AFTERTOUCH],n.MIDI_2PARAMS_EVENTS=[n.EVENT_MIDI_NOTE_OFF,n.EVENT_MIDI_NOTE_ON,n.EVENT_MIDI_NOTE_AFTERTOUCH,n.EVENT_MIDI_CONTROLLER,n.EVENT_MIDI_PITCH_BEND],n.createParser=function(e,t,r){var o,a,i,s,c;if(e instanceof DataView&&(e={position:t||0,buffer:e,readUint8:function(){return this.buffer.getUint8(this.position++)},readUint16:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readUint32:function(){var e=this.buffer.getUint16(this.position);return this.position=this.position+2,e},readVarInt:function(){for(var e,t=0,r=0;4>r++;){if(!(128&(e=this.readUint8())))return t+e;t+=127&e,t<<=7}throw new Error("0x"+this.position.toString(16)+": Variable integer length cannot exceed 4 bytes")},readBytes:function(e){for(var t=[];0<e;e--)t.push(this.readUint8());return t},pos:function(){return"0x"+(this.buffer.byteOffset+this.position).toString(16)},end:function(){return this.position===this.buffer.byteLength}},t=0),0<t)for(;t--;)e.readUint8();return{next:function(){if(e.end())return null;if(a={index:e.pos(),delta:e.readVarInt()},240===(240&(o=e.readUint8()))){if(o!==n.EVENT_META){if(o===n.EVENT_SYSEX||o===n.EVENT_DIVSYSEX)return a.type=o,a.length=e.readVarInt(),a.data=e.readBytes(a.length),a;if(r)throw new Error(e.pos()+" Unknown event type "+o.toString(16)+", Delta: "+a.delta+".");return a.type=o,a.badsubtype=e.readVarInt(),a.length=e.readUint8(),a.data=e.readBytes(a.length),a}switch(a.type=n.EVENT_META,a.subtype=e.readUint8(),a.length=e.readVarInt(),a.subtype){case n.EVENT_META_SEQUENCE_NUMBER:if(r&&2!==a.length)throw new Error(e.pos()+" Bad metaevent length.");return a.msb=e.readUint8(),a.lsb=e.readUint8(),a;case n.EVENT_META_TEXT:case n.EVENT_META_COPYRIGHT_NOTICE:case n.EVENT_META_TRACK_NAME:case n.EVENT_META_INSTRUMENT_NAME:case n.EVENT_META_LYRICS:case n.EVENT_META_MARKER:case n.EVENT_META_CUE_POINT:return a.data=e.readBytes(a.length),a;case n.EVENT_META_MIDI_CHANNEL_PREFIX:if(r&&1!==a.length)throw new Error(e.pos()+" Bad metaevent length.");return a.prefix=e.readUint8(),a;case n.EVENT_META_END_OF_TRACK:if(r&&0!==a.length)throw new Error(e.pos()+" Bad metaevent length.");return a;case n.EVENT_META_SET_TEMPO:if(r&&3!==a.length)throw new Error(e.pos()+" Tempo meta event length must be 3.");return a.tempo=(e.readUint8()<<16)+(e.readUint8()<<8)+e.readUint8(),a.tempoBPM=6e7/a.tempo,a;case n.EVENT_META_SMTPE_OFFSET:if(r&&5!==a.length)throw new Error(e.pos()+" Bad metaevent length.");if(a.hour=e.readUint8(),r&&23<a.hour)throw new Error(e.pos()+" SMTPE offset hour value must be part of 0-23.");if(a.minutes=e.readUint8(),r&&59<a.minutes)throw new Error(e.pos()+" SMTPE offset minutes value must be part of 0-59.");if(a.seconds=e.readUint8(),r&&59<a.seconds)throw new Error(e.pos()+" SMTPE offset seconds value must be part of 0-59.");if(a.frames=e.readUint8(),r&&30<a.frames)throw new Error(e.pos()+" SMTPE offset frames value must be part of 0-30.");if(a.subframes=e.readUint8(),r&&99<a.subframes)throw new Error(e.pos()+" SMTPE offset subframes value must be part of 0-99.");return a;case n.EVENT_META_KEY_SIGNATURE:if(r&&2!==a.length)throw new Error(e.pos()+" Bad metaevent length.");if(a.key=e.readUint8(),r&&(-7>a.key||7<a.key))throw new Error(e.pos()+" Bad metaevent length.");if(a.scale=e.readUint8(),r&&0!==a.scale&&1!==a.scale)throw new Error(e.pos()+" Key signature scale value must be 0 or 1.");return a;case n.EVENT_META_TIME_SIGNATURE:if(r&&4!==a.length)throw new Error(e.pos()+" Bad metaevent length.");return a.data=e.readBytes(a.length),a.param1=a.data[0],a.param2=a.data[1],a.param3=a.data[2],a.param4=a.data[3],a;case n.EVENT_META_SEQUENCER_SPECIFIC:return a.data=e.readBytes(a.length),a;default:if(r)throw new Error(e.pos()+" Unknown meta event type ("+a.subtype.toString(16)+").");return a.data=e.readBytes(a.length),a}}else{if(0===(128&o)){if(!i)throw new Error(e.pos()+" Running status without previous event");c=o}else i=o>>4,s=15&o,c=e.readUint8();switch(a.type=n.EVENT_MIDI,a.subtype=i,a.channel=s,a.param1=c,i){case n.EVENT_MIDI_NOTE_OFF:return a.param2=e.readUint8(),a;case n.EVENT_MIDI_NOTE_ON:return a.param2=e.readUint8(),a.param2||(a.subtype=n.EVENT_MIDI_NOTE_OFF,a.param2=127),a;case n.EVENT_MIDI_NOTE_AFTERTOUCH:case n.EVENT_MIDI_CONTROLLER:return a.param2=e.readUint8(),a;case n.EVENT_MIDI_PROGRAM_CHANGE:case n.EVENT_MIDI_CHANNEL_AFTERTOUCH:return a;case n.EVENT_MIDI_PITCH_BEND:return a.param2=e.readUint8(),a;default:if(r)throw new Error(e.pos()+" Unknown MIDI event type ("+i.toString(16)+").");return a}}}}},n.writeToTrack=function(e,t,r){var o,a,i,s,c=0;for(o=0,a=e.length;o<a;o++){if(e[o].delta>>>28)throw Error("Event #"+o+": Maximum delta time value reached ("+e[o].delta+"/134217728 max)");if(e[o].delta>>>21&&(t[c++]=e[o].delta>>>21&127|128),e[o].delta>>>14&&(t[c++]=e[o].delta>>>14&127|128),e[o].delta>>>7&&(t[c++]=e[o].delta>>>7&127|128),t[c++]=127&e[o].delta,e[o].type===n.EVENT_MIDI)t[c++]=(e[o].subtype<<4)+e[o].channel,t[c++]=e[o].param1,-1!==n.MIDI_2PARAMS_EVENTS.indexOf(e[o].subtype)&&(t[c++]=e[o].param2);else{if(t[c++]=e[o].type,e[o].type===n.EVENT_META&&(t[c++]=e[o].subtype),e[o].length>>>28)throw Error("Event #"+o+": Maximum length reached ("+e[o].length+"/134217728 max)");if(e[o].length>>>21&&(t[c++]=e[o].length>>>21&127|128),e[o].length>>>14&&(t[c++]=e[o].length>>>14&127|128),e[o].length>>>7&&(t[c++]=e[o].length>>>7&127|128),t[c++]=127&e[o].length,e[o].type===n.EVENT_META)switch(e[o].subtype){case n.EVENT_META_SEQUENCE_NUMBER:t[c++]=e[o].msb,t[c++]=e[o].lsb;break;case n.EVENT_META_TEXT:case n.EVENT_META_COPYRIGHT_NOTICE:case n.EVENT_META_TRACK_NAME:case n.EVENT_META_INSTRUMENT_NAME:case n.EVENT_META_LYRICS:case n.EVENT_META_MARKER:case n.EVENT_META_CUE_POINT:for(i=0,s=e[o].length;i<s;i++)t[c++]=e[o].data[i];break;case n.EVENT_META_MIDI_CHANNEL_PREFIX:t[c++]=e[o].prefix;break;case n.EVENT_META_END_OF_TRACK:break;case n.EVENT_META_SET_TEMPO:t[c++]=e[o].tempo>>16,t[c++]=e[o].tempo>>8&255,t[c++]=255&e[o].tempo;break;case n.EVENT_META_SMTPE_OFFSET:if(r&&23<e[o].hour)throw new Error("Event #"+o+": SMTPE offset hour value must be part of 0-23.");if(t[c++]=e[o].hour,r&&59<e[o].minutes)throw new Error("Event #"+o+": SMTPE offset minutes value must be part of 0-59.");if(t[c++]=e[o].minutes,r&&59<e[o].seconds)throw new Error("Event #"+o+": SMTPE offset seconds value must be part of 0-59.");if(t[c++]=e[o].seconds,r&&30<e[o].frames)throw new Error("Event #"+o+": SMTPE offset frames amount must be part of 0-30.");if(t[c++]=e[o].frames,r&&99<e[o].subframes)throw new Error("Event #"+o+": SMTPE offset subframes amount must be part of 0-99.");t[c++]=e[o].subframes;break;case n.EVENT_META_KEY_SIGNATURE:if("number"!=typeof e[o].key||-7>e[o].key||7<e[o].scale)throw new Error("Event #"+o+":The key signature key must be between -7 and 7");if("number"!==typeof e[o].scale||0>e[o].scale||1<e[o].scale)throw new Error("Event #"+o+":The key signature scale must be 0 or 1");t[c++]=e[o].key,t[c++]=e[o].scale;break;case n.EVENT_META_TIME_SIGNATURE:case n.EVENT_META_SEQUENCER_SPECIFIC:default:for(i=0,s=e[o].length;i<s;i++)t[c++]=e[o].data[i]}else for(i=0,s=e[o].length;i<s;i++)t[c++]=e[o].data[i]}}},n.getRequiredBufferLength=function(e){var t,r=0,o=0;for(o=0,t=e.length;o<t;o++)r+=e[o].delta>>>21?4:e[o].delta>>>14?3:e[o].delta>>>7?2:1,e[o].type===n.EVENT_MIDI?(r++,r++,-1!==n.MIDI_2PARAMS_EVENTS.indexOf(e[o].subtype)&&r++):(r++,e[o].type===n.EVENT_META&&r++,r+=e[o].length>>>21?4:e[o].length>>>14?3:e[o].length>>>7?2:1,r+=e[o].length);return r},e.exports=n},"qO+3":function(e,t,r){"use strict";var n,o;(o=n||(n={})).FileChooser={onFileLoaded:"onFileLoaded"},o.Toggle={onSongVersionFormatChanged:"onSongVersionFormatChanged",onCheckboxChanged:"onCheckboxChanged"},o.Song={onTracksUpdated:"onTracksUpdated",onPlayNoteGroup:"onPlayNoteGroup"},t.a=n},t1q6:function(e,t,r){"use strict";var n=r("nKUr"),o=r("q1tI"),a=r("xgb5"),i=r("kfFl"),s=r("yv+Y"),c=r("EQI2"),u=r("++HY"),l=r("+JwS"),f=r("Z3vd");t.a=function(e){var t=e.initialOpenState,r=e.preloadNow,h=Object(o.useState)(t),d=h[0],p=h[1],g=function(e,t){p(!1)};return Object(a.a)("keydown",(function(e){g()})),Object(o.useEffect)((function(){return function(){}}),[]),Object(n.jsx)("div",{children:Object(n.jsxs)(i.a,{onClose:g,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",open:d,onExited:r,children:[Object(n.jsx)(s.a,{id:"dialog-title",children:"Let's Make Music"}),Object(n.jsx)(c.a,{children:Object(n.jsx)(u.a,{id:"dialog-description",children:"This is going to be fun!"})}),Object(n.jsx)(l.a,{children:Object(n.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(e){g()},children:"OK"})})]})})}},yWwD:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/piano/v2",function(){return r("YSrY")}])},zq3Y:function(e,t,r){"use strict";function n(e,t){let r,o;if(e){if(!(e instanceof ArrayBuffer))throw new Error("Invalid buffer received.");if(12>e.byteLength-t)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : Buffer length must size at least 12bytes");if(this.datas=new DataView(e,t,n.HDR_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"r"!==String.fromCharCode(this.datas.getUint8(2))||"k"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : MTrk prefix not found");if(o=this.getTrackLength(),e.byteLength-t<o)throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : The track size exceed the buffer length.");if(this.datas=new DataView(e,t,n.HDR_LENGTH+o),255!==this.datas.getUint8(n.HDR_LENGTH+(o-3))||47!==this.datas.getUint8(n.HDR_LENGTH+(o-2))||0!==this.datas.getUint8(n.HDR_LENGTH+(o-1)))throw new Error("Invalid MIDIFileTrack (0x"+t.toString(16)+") : No track end event found at the expected index ("+(n.HDR_LENGTH+(o-1)).toString(16)+").")}else r=new Uint8Array(12),r[0]=77,r[1]=84,r[2]=114,r[3]=107,r[4]=0,r[5]=0,r[6]=0,r[7]=4,r[8]=0,r[9]=255,r[10]=47,r[11]=0,this.datas=new DataView(r.buffer,0,n.HDR_LENGTH+4)}n.HDR_LENGTH=8,n.prototype.getTrackLength=function(){return this.datas.getUint32(4)},n.prototype.setTrackLength=function(e){return this.datas.setUint32(4,e)},n.prototype.getTrackContent=function(){return new DataView(this.datas.buffer,this.datas.byteOffset+n.HDR_LENGTH,this.datas.byteLength-n.HDR_LENGTH)},n.prototype.setTrackContent=function(e){let t,r,o,a;const i=e.byteLength-e.byteOffset;if(4>i)throw new Error("Invalid track length, must size at least 4bytes");for(this.datas=new DataView(new Uint8Array(n.HDR_LENGTH+i).buffer),this.datas.setUint8(0,77),this.datas.setUint8(1,84),this.datas.setUint8(2,114),this.datas.setUint8(3,107),this.datas.setUint32(4,i),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=new Uint8Array(this.datas.buffer,n.HDR_LENGTH,i),o=0,a=t.length;o<a;o++)r[o]=t[o]},e.exports=n}},[["yWwD",0,1,3,2,4,5,8,6,7,10,9]]]);