_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{"094J":function(e,t,r){"use strict";(function(e){var n=r("q1tI"),a=r("puqk"),s={},o=function(e,t,r){return s[e]||(s[e]={callbacks:[],value:r}),s[e].callbacks.push(t),{deregister:function(){var r=s[e].callbacks,n=r.indexOf(t);n>-1&&r.splice(n,1)},emit:function(r){s[e].value!==r&&(s[e].value=r,s[e].callbacks.forEach((function(e){t!==e&&e(r)})))}}};t.a=function(t,r){if(void 0===r&&(r="undefined"!=typeof e&&e.localStorage?e.localStorage:"undefined"!=typeof globalThis&&globalThis.localStorage?globalThis.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:"undefined"!=typeof localStorage?localStorage:null),r){var s=(i=r,{get:function(e,t){var r=i.getItem(e);return null==r?"function"==typeof t?t():t:JSON.parse(r)},set:function(e,t){i.setItem(e,JSON.stringify(t))}});return function(e){return function(e,t,r){var s=r.get,i=r.set,c=Object(n.useRef)(null),u=Object(n.useState)((function(){return s(t,e)})),l=u[0],f=u[1];Object(a.a)("storage",(function(e){if(e.key===t){var r=JSON.parse(e.newValue);l!==r&&f(r)}})),Object(n.useEffect)((function(){return c.current=o(t,f,e),function(){c.current.deregister()}}),[e,t]);var d=Object(n.useCallback)((function(e){var r="function"==typeof e?e(l):e;i(t,r),f(r),c.current.emit(e)}),[l,i,t]);return[l,d]}(e,t,s)}}var i;return n.useState}}).call(this,r("yLpj"))},BsWD:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("a3WO");function a(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n.a)(e,t):void 0}}},DSFK:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return n}))},KcGB:function(e,t,r){"use strict";var n=r("nKUr"),a=r("MX0m"),s=r.n(a);t.a=function(){return Object(n.jsxs)("div",{className:"jsx-1877042469",children:["shift + esc \u2192 clear",Object(n.jsx)("br",{className:"jsx-1877042469"}),"cmd + c \u2192 copy ",Object(n.jsx)("br",{className:"jsx-1877042469"}),"arrow keys \u2192 adjust",Object(n.jsx)("br",{className:"jsx-1877042469"}),"tab \u2192 combine",Object(n.jsx)(s.a,{id:"1877042469",children:["div.jsx-1877042469{float:right;text-align:right;font-size:70%;line-height:150%;margin-left:20px;}"]})]})}},ODXe:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("DSFK");var a=r("BsWD"),s=r("PYwp");function o(e,t){return Object(n.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(c){a=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw s}}return r}}(e,t)||Object(a.a)(e,t)||Object(s.a)()}},PYwp:function(e,t,r){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,"a",(function(){return n}))},WKqS:function(e,t,r){"use strict";var n;!function(e){var t=null;e.setRef=function(e){t=e},e.isFocusedOnInputs=function(){return!!t.current&&t.current.hasFocus()},e.isNoteSharp=function(e){return new RegExp(e,"i").test(t.current?t.current.getSharps():"")},e.isNoteFlat=function(e){return new RegExp(e,"i").test(t.current?t.current.getFlats():"")}}(n||(n={})),t.a=n},a3WO:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},eRSt:function(e,t,r){"use strict";var n=r("nKUr"),a=r("MX0m"),s=r.n(a);t.a=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"jsx-1079321350"}),Object(n.jsx)(s.a,{id:"1079321350",children:["div.jsx-1079321350{clear:both;}"]})]})}},jLID:function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return k}));var n=r("nKUr"),a=r("ODXe"),s=r("MX0m"),o=r.n(s),i=r("KcGB"),c=r("1OyB"),u=r("vuIU"),l=r("rePB"),f=r("WKqS"),d=r("OTm4"),p=null,h=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],b={1:44,2:39,3:35,4:30,5:25,6:20},v=function(){function e(){Object(c.a)(this,e),Object(l.a)(this,"setGuitarTab",void 0),Object(l.a)(this,"getGuitarTab",void 0),Object(l.a)(this,"getGuitarTabTextArea",void 0),Object(l.a)(this,"getGuitarCanvas",void 0),Object(l.a)(this,"noteOffsetForString",[0,7,2,10,5,0,7]),Object(l.a)(this,"piano",null),Object(l.a)(this,"fretOffset",0),Object(l.a)(this,"stringOffset",0),Object(l.a)(this,"noteGroups",[]),Object(l.a)(this,"keyboardLabels",[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l",";"],["z","x","c","v","b","n","m",",",".","/"]]),Object(l.a)(this,"keyCodeToFret",{90:0,88:1,67:2,86:3,66:4,78:5,77:6,188:7,190:8,191:9,65:0,83:1,68:2,70:3,71:4,72:5,74:6,75:7,76:8,186:9,59:9,222:10,81:0,87:1,69:2,82:3,84:4,89:5,85:6,73:7,79:8,80:9,219:10,221:11,220:12,49:0,50:1,51:2,52:3,53:4,54:5,55:6,56:7,57:8,48:9,189:10,187:11}),Object(l.a)(this,"keyCodeToString",{90:4,88:4,67:4,86:4,66:4,78:4,77:4,188:4,190:4,191:4,65:3,83:3,68:3,70:3,71:3,72:3,74:3,75:3,76:3,186:3,59:3,222:3,81:2,87:2,69:2,82:2,84:2,89:2,85:2,73:2,79:2,80:2,219:2,221:2,220:2,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,48:1,189:1,187:1}),this.setupCopyHandler()}return Object(u.a)(e,[{key:"setupCopyHandler",value:function(){var e=this;document.querySelector("html").addEventListener("copy",(function(t){t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",e.getNoteGroupsAsSpaceDelimitedString())})),document.querySelector("html").addEventListener("cut",(function(t){t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",e.getNoteGroupsAsSpaceDelimitedString()),setTimeout((function(){e.resetData()}),100)}))}},{key:"resetOffsets",value:function(){this.fretOffset=0,this.stringOffset=0,this.saveAndShowData()}},{key:"resetData",value:function(){this.noteGroups=[],this.saveAndShowData()}},{key:"deleteLastGroup",value:function(){this.noteGroups.pop(),this.saveAndShowData()}},{key:"saveAndShowData",value:function(){this.updateGuitarTabInTextArea(),this.drawFrets()}},{key:"updateGuitarTabInTextArea",value:function(){this.setGuitarTab(this.getNoteGroupsAsSpaceDelimitedString())}},{key:"getNoteGroupsAsSpaceDelimitedString",value:function(){return this.noteGroups.join(" ")}},{key:"splitNoteGroup",value:function(e){var t={6:"X",5:"X",4:"X",3:"X",2:"X",1:"X"};if(6==e.length)for(var r=e.toUpperCase().split("").reverse(),n=1;n<=6;n++)"X"!=r[n-1]&&(t[n]=r[n-1]);else{var a=e.split("_"),s=a[0],o=a[1];t[s]=o}return t}},{key:"mergeGroupIntoArray",value:function(e,t){if(console.log(e+" "+t),6==e.length)for(var r=e.toUpperCase().split(""),n=0;n<6;n++)"X"!=r[n]&&(t[n]=r[n]);else{var a=e.split("_"),s=a[0],o=parseInt(a[1]);o>9&&(o=o.toString(16).toUpperCase()),t[6-s]=o}}},{key:"mergeLastTwoGroups",value:function(){if(!(this.noteGroups.length<2)){var e=this.noteGroups.pop(),t=this.noteGroups.pop(),r=["X","X","X","X","X","X"];this.mergeGroupIntoArray(t,r),this.mergeGroupIntoArray(e,r),this.noteGroups.push(r.join("")),this.saveAndShowData()}}},{key:"drawStringsAndFrets",value:function(e){e.fillStyle="rgba(255,255,255,0.1)",e.fillRect(0,0,30,280),e.lineWidth=1;for(var t=1;t<=6;t++){e.beginPath();var r=.08*t;e.strokeStyle="rgba(255,255,255,".concat(r,")"),e.moveTo(0,40*t),e.lineTo(1040,40*t),e.stroke()}e.beginPath(),e.lineWidth=1,e.strokeStyle="rgba(255,255,255,0.5)";for(var n=1;n<=11;n++){var a=85*n+20;e.beginPath(),e.moveTo(a,0),e.lineTo(a,280),e.stroke()}}},{key:"getMostRecentNoteGroup",value:function(){var e=this.noteGroups[this.noteGroups.length-1];return this.splitNoteGroup(e)}},{key:"playMostRecentGroup",value:function(){if(0!==this.noteGroups.length)for(var e=this.getMostRecentNoteGroup(),t=1;t<=6;t++){var r=e[t];if("X"!=r){r=parseInt(r);var n=b[t]+r;this.playPianoNote(n)}}else console.log("No note groups to play.")}},{key:"playPianoNote",value:function(e){console.log("PLAY "+e),p.play(e,.4,.8)}},{key:"drawMostRecentGroup",value:function(e){if(0!=this.noteGroups.length)for(var t=this.getMostRecentNoteGroup(),r=1;r<=6;r++){var n=t[r];if("X"!=n){var a=85*(n=parseInt(n))+(0==n?15:-22.5),s=40*r;e.beginPath(),e.arc(a,s,14,0,2*Math.PI),e.fillStyle="rgba(180,180,0,0.5)",e.fill()}}}},{key:"drawFrets",value:function(){var e=this.getGuitarCanvas();if(e&&e.getContext){var t=e.getContext("2d");t&&(t.fillStyle="#131313",t.fillRect(0,0,e.width,e.height),this.drawStringsAndFrets(t),this.drawKeyLabels(t),this.drawMostRecentGroup(t))}}},{key:"drawKeyLabels",value:function(e){e.font="14px Tahoma",e.lineJoin="round",e.lineWidth=6;for(var t=1;t<=6;t++)for(var r=0;r<=12;r++){var n=0==r?10:-27.5,a=this.noteOffsetForString[t],s=h[(a+r)%12];e.fillStyle="C"===s?"#F55":"#FFF";var o=85*r+n,i=40*t+6;e.fillText(s,o,i)}e.font="15px Hack, Consolas, Courier",e.fillStyle="#FF4";for(var c=1;c<=4;c++)for(var u=0;u<10;u++){var l=this.keyboardLabels[c-1][u],f=u+this.fretOffset,d=85*f+(0==f?10:-27.5),p=40*(c+this.stringOffset)+22;e.fillText(l,d,p)}}},{key:"loadNoteGroupsFromGuitarTab",value:function(e){var t=e.trim();this.noteGroups=""==t?[]:t.split(" "),this.updateGuitarTabInTextArea()}},{key:"play",value:function(e,t){if(this.keyCodeToFret.hasOwnProperty(e)){var r=this.keyCodeToFret[e]+this.fretOffset;console.log("Adjusted Fret "+r);var n=this.keyCodeToString[e]+this.stringOffset,a=this.noteOffsetForString[n],s=h[(a+r)%12].toLowerCase();f.a.isNoteSharp(s)&&t++,f.a.isNoteFlat(s)&&t--,r+=t,this.noteGroups.push(n+"_"+r);var o=b[n]+r;this.playPianoNote(o),this.saveAndShowData()}}},{key:"onKeyDown",value:function(e){if(p||(console.log("Init Web Audio"),p=new d.a),(!e.metaKey||37==e.keyCode||39==e.keyCode)&&!e.altKey){var t=0;switch(e.ctrlKey?t=-1:e.shiftKey&&(t=1),e.preventDefault(),e.keyCode){case 32:this.playMostRecentGroup();break;case 192:console.log("SHIFT + `"),this.resetData();break;case 27:e.shiftKey?this.resetData():this.resetOffsets();break;case 8:this.deleteLastGroup();break;case 9:this.mergeLastTwoGroups();break;case 37:this.fretOffset--,this.fretOffset<0&&(this.fretOffset=0),this.drawFrets();break;case 39:this.fretOffset++,this.fretOffset>3&&(this.fretOffset=3),this.drawFrets();break;case 38:this.stringOffset--,this.stringOffset<0&&(this.stringOffset=0),this.drawFrets();break;case 40:this.stringOffset++,this.stringOffset>2&&(this.stringOffset=2),this.drawFrets();break;default:this.play(e.keyCode,t)}}}}]),e}(),g=r("nZzK"),j=r("eRSt"),y=r("q1tI"),O=r("xgb5"),x=r("094J"),S=Object(x.a)("guitar_tab"),m=null;m=new v;var w=function(){var e=S(""),t=Object(a.a)(e,2),r=t[0],s=t[1],c=Object(y.useRef)(),u=Object(y.useRef)(),l=Object(y.useRef)();return Object(O.a)("keydown",(function(e){f.a.isFocusedOnInputs()||m.onKeyDown(e)})),Object(y.useEffect)((function(){f.a.setRef(l),m.setGuitarTab=s,m.getGuitarTab=function(){return r},m.getGuitarTabTextArea=function(){return c.current},m.getGuitarCanvas=function(){return u.current},m.loadNoteGroupsFromGuitarTab(r),m.drawFrets()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(i.a,{}),Object(n.jsx)("div",{className:"jsx-3851496053",children:Object(n.jsx)(g.a,{ref:l,localStorageKeyPrefix:"guitar",style:{float:"left"}})}),Object(n.jsx)(j.a,{}),Object(n.jsx)("br",{className:"jsx-3851496053"}),Object(n.jsxs)("div",{className:"jsx-3851496053 content",children:[Object(n.jsx)("textarea",{ref:c,rows:3,cols:80,defaultValue:r,readOnly:!0,className:"jsx-3851496053 textarea"}),Object(n.jsx)("canvas",{ref:u,width:"1040",height:"280",className:"jsx-3851496053 canvas"})]}),Object(n.jsx)(o.a,{id:"3641922067",children:["body{margin:15px 20px;}"]}),Object(n.jsx)(o.a,{id:"4277798255",children:[".content.jsx-3851496053{width:100%;text-align:center;}",".textarea.jsx-3851496053{font-family:Inconsolata,Menlo,Monaco,Courier,monospace;font-size:16pt;width:100%;background-color:#444;color:#ddd;}",".canvas.jsx-3851496053{border:1px solid rgba(0,0,0,0.2);}"]})]})},k=!0;t.default=function(){return Object(n.jsx)(w,{})}},nZzK:function(e,t,r){"use strict";var n=r("nKUr"),a=r("MX0m"),s=r.n(a),o=r("ODXe"),i=r("q1tI"),c=r("094J"),u=Object(i.forwardRef)((function(e,t){var r=e.label,a=e.persistedStateKey,u=Object(c.a)(a)(""),l=Object(o.a)(u,2),f=l[0],d=l[1],p=Object(i.useRef)();return Object(i.useImperativeHandle)(t,(function(){return{hasFocus:function(){return p.current===document.activeElement},getValue:function(){return f}}})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"jsx-3870922891",children:[r," \xa0",Object(n.jsx)("input",{ref:p,value:f,onChange:function(e){console.log("InputSaved: onChange"),d(e.target.value.toUpperCase().replace(/[^ABCDEFG]+/g,"")),console.dir(localStorage)},onKeyDown:function(e){console.log("InputSaved: onKeyDown key = ".concat(e.key," | code = ").concat(e.code)),console.dir(localStorage)},onKeyUp:function(e){console.log("InputSaved: onKeyUp key = ".concat(e.key," | code = ").concat(e.code)),d(e.target.value.toUpperCase().replace(/[^ABCDEFG]+/g,"")),console.dir(localStorage),"Escape"===e.code&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()},onBlur:function(e){console.log("InputSaved: onBlur"),console.dir(localStorage)},className:"jsx-3870922891"})]}),Object(n.jsx)(s.a,{id:"3870922891",children:["div.jsx-3870922891{display:block;}","input.jsx-3870922891{background-color:#444;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid #222;padding:4px;width:100px;color:#ddd;}"]})]})})),l=Object(i.forwardRef)((function(e,t){var r=e.style,a=e.localStorageKeyPrefix,o=Object(i.useRef)(),c=Object(i.useRef)();return Object(i.useImperativeHandle)(t,(function(){return{hasFocus:function(){return!(!o.current||!o.current.hasFocus())||!(!c.current||!c.current.hasFocus())},getSharps:function(){if(o.current){var e=o.current.getValue();return console.log("SHARPS VALUE "+e),e}return""},getFlats:function(){if(c.current){var e=c.current.getValue();return console.log("FLATS VALUE "+e),e}return""}}})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:r,className:"jsx-2940738605 sharps-and-flats",children:[Object(n.jsx)(u,{ref:o,label:"sharps",persistedStateKey:a+"_sharps"}),Object(n.jsx)(u,{ref:c,label:"flats",persistedStateKey:a+"_flats"})]}),Object(n.jsx)(s.a,{id:"2940738605",children:["div.sharps-and-flats.jsx-2940738605{margin-right:20px;text-align:right;}","input.jsx-2940738605{width:150px;}"]})]})}));t.a=l},puqk:function(e,t,r){"use strict";(function(e){var n=r("q1tI");t.a=function(t,r,a,s){void 0===a&&(a=e),void 0===s&&(s={});var o=Object(n.useRef)(),i=s.capture,c=s.passive,u=s.once;Object(n.useEffect)((function(){o.current=r}),[r]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var e=function(e){return o.current(e)},r={capture:i,passive:c,once:u};return a.addEventListener(t,e,r),function(){a.removeEventListener(t,e,r)}}}),[t,a,i,c,u])}}).call(this,r("yLpj"))},wCx2:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guitar/v1",function(){return r("jLID")}])}},[["wCx2",0,1,3,2,4,6]]]);