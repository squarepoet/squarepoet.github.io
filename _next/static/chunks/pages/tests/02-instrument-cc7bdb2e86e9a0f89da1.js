_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{"1b48":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tests/02-instrument",function(){return n("UPKk")}])},OTm4:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return S}));var i=n("1OyB"),a=n("vuIU"),s=n("rePB"),r=n("B7GI"),o=n("XlTo");function l(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=function t(e){var n=this;Object(i.a)(this,t),Object(s.a)(this,"filesToLoad",[]);var a,r=l(e);try{var c=function(){var t=a.value,e=new o.i(t,(function(){console.log("Preloaded "+t)}));n.filesToLoad.push(e)};for(r.s();!(a=r.n()).done;)c()}catch(u){r.e(u)}finally{r.f()}},h=function t(){Object(i.a)(this,t)};Object(s.a)(h,"isRunning",!1);var p,m=h;!function(t){t[t.SynthBasic=0]="SynthBasic",t[t.SynthFM=1]="SynthFM",t[t.SynthAM=2]="SynthAM",t[t.SynthMusicalJS=3]="SynthMusicalJS",t[t.Sampled_1=4]="Sampled_1",t[t.Sampled_2=5]="Sampled_2",t[t.SynthPluck=6]="SynthPluck",t[t.COUNT=7]="COUNT"}(p||(p={}));var S=function(t){var e=parseInt(t);return!isNaN(e)&&e>=0&&e<p.COUNT?e:p.SynthBasic},y=function(){function t(e){if(Object(i.a)(this,t),Object(s.a)(this,"type",p.SynthBasic),Object(s.a)(this,"toneJS_SynthOrSampler",null),Object(s.a)(this,"toneJS_Pluck",null),Object(s.a)(this,"musicalJS_Synth",null),Object(s.a)(this,"isReady",!1),Object(s.a)(this,"preloader",null),Object(s.a)(this,"samplesMap",void 0),Object(s.a)(this,"baseURL",""),this.type=e,this.type===p.SynthMusicalJS)console.log("Creating a Musical JS Instrument"),this.musicalJS_Synth=new r.a.Instrument("piano"),this.isReady=!0;else switch(console.log("Creating a Tone JS Instrument"),m.isRunning||o.k().then((function(){console.log("Tone is Ready!"),m.isRunning=!0})),this.type){case p.Sampled_1:this.baseURL="/s/m/grand/",this.samplesMap={C1:"4.mp3",C2:"16.mp3",C3:"28.mp3",D3:"30.mp3",E3:"32.mp3",G3:"35.mp3",A3:"37.mp3",B3:"39.mp3",C4:"40.mp3",D4:"42.mp3",E4:"44.mp3",F4:"45.mp3",G4:"47.mp3",A4:"49.mp3",C5:"52.mp3",F5:"57.mp3",A5:"61.mp3",C6:"64.mp3",F6:"69.mp3",C7:"76.mp3",G7:"83.mp3",C8:"88.mp3"},this.setupSamplerInstrument({attack:.01});break;case p.Sampled_2:this.baseURL="/s/m/bright/",this.samplesMap={C1:"4.mp3",G1:"11.mp3",C2:"16.mp3",G2:"23.mp3",C3:"28.mp3",G3:"35.mp3",C4:"40.mp3",G4:"47.mp3",C5:"52.mp3",G5:"59.mp3",C6:"64.mp3",G6:"71.mp3",C7:"76.mp3",G7:"83.mp3",C8:"88.mp3"},this.setupSamplerInstrument({attack:.05});break;case p.SynthFM:this.toneJS_SynthOrSampler=new o.f(o.c).toDestination(),this.isReady=!0;break;case p.SynthAM:this.toneJS_SynthOrSampler=new o.f(o.a).toDestination(),this.isReady=!0;break;case p.SynthPluck:console.log("%cThe pluck synth is currently really shitty. Please do not proceed. \ud83d\ude49","color:red;font-size:16px;font-weight:bold;"),this.toneJS_Pluck=new o.e({attackNoise:.2,dampening:2e3,resonance:.982,release:1}).toDestination(),this.isReady=!0;break;case p.SynthBasic:default:this.toneJS_SynthOrSampler=new o.f(o.h).toDestination(),this.isReady=!0}}return Object(a.a)(t,[{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e>0?" for ".concat(e," seconds"):"",a=" at velocity = "+n;console.log("Instrument: PLAY "+t+i+a);var s=t+20,r=o.d(s,"midi").toNote();this.toneJS_SynthOrSampler?e>0?this.toneJS_SynthOrSampler.triggerAttackRelease(r,e,o.j(),n):this.toneJS_SynthOrSampler.triggerAttack(r,o.j(),n):this.toneJS_Pluck?this.toneJS_Pluck.triggerAttack(r):this.musicalJS_Synth.tone(-s)}},{key:"stop",value:function(t){if(console.log("Instrument: STOP "+t),this.toneJS_SynthOrSampler){var e=t+20,n=o.d(e,"midi").toNote();this.toneJS_SynthOrSampler.triggerRelease(n)}}},{key:"setupSamplerInstrument",value:function(t){var e=this;this.isReady=!1;var n=[];for(var i in this.samplesMap){var a=this.samplesMap[i];n.push(this.baseURL+a)}this.preloader=new u(n);var s={urls:this.samplesMap,baseUrl:this.baseURL,attack:t.attack,release:.8,curve:"exponential",onload:function(){e.isReady=!0}};this.toneJS_SynthOrSampler=new o.g(s).toDestination()}},{key:"dispose",value:function(){this.preloader=null,this.toneJS_SynthOrSampler&&(this.toneJS_SynthOrSampler.dispose(),this.toneJS_SynthOrSampler=null),this.toneJS_Pluck&&(this.toneJS_Pluck.dispose(),this.toneJS_Pluck=null),this.musicalJS_Synth&&(this.musicalJS_Synth=null)}},{key:"isInitialized",get:function(){return this.isReady}}]),t}();e.b=y},UPKk:function(t,e,n){"use strict";n.r(e);var i,a=n("nKUr"),s=n("OTm4"),r=n("q1tI");e.default=function(){return Object(r.useEffect)((function(){}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Instrument Wrapper Demo"}),Object(a.jsx)("button",{onClick:function(){i=new s.b(s.a.SynthBasic)},children:"START"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){i.play(40),i.play(44),i.play(47)},children:"Play Something"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){},children:"STOP"})]})}}},[["1b48",0,1,3,2]]]);